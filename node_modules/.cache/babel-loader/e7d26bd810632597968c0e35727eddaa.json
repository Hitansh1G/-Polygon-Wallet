{"ast":null,"code":"(function () {\n  /*\n  \n   Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n   This code may only be used under the BSD style license found at\n   http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n   at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n   be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n   Google as part of the polymer project is also subject to an additional IP\n   rights grant found at http://polymer.github.io/PATENTS.txt\n  */\n  'use strict';\n\n  var n = window.Document.prototype.createElement,\n      p = window.Document.prototype.createElementNS,\n      aa = window.Document.prototype.importNode,\n      ba = window.Document.prototype.prepend,\n      ca = window.Document.prototype.append,\n      da = window.DocumentFragment.prototype.prepend,\n      ea = window.DocumentFragment.prototype.append,\n      q = window.Node.prototype.cloneNode,\n      r = window.Node.prototype.appendChild,\n      t = window.Node.prototype.insertBefore,\n      u = window.Node.prototype.removeChild,\n      v = window.Node.prototype.replaceChild,\n      w = Object.getOwnPropertyDescriptor(window.Node.prototype, \"textContent\"),\n      y = window.Element.prototype.attachShadow,\n      z = Object.getOwnPropertyDescriptor(window.Element.prototype, \"innerHTML\"),\n      A = window.Element.prototype.getAttribute,\n      B = window.Element.prototype.setAttribute,\n      C = window.Element.prototype.removeAttribute,\n      D = window.Element.prototype.getAttributeNS,\n      E = window.Element.prototype.setAttributeNS,\n      F = window.Element.prototype.removeAttributeNS,\n      G = window.Element.prototype.insertAdjacentElement,\n      H = window.Element.prototype.insertAdjacentHTML,\n      fa = window.Element.prototype.prepend,\n      ha = window.Element.prototype.append,\n      ia = window.Element.prototype.before,\n      ja = window.Element.prototype.after,\n      ka = window.Element.prototype.replaceWith,\n      la = window.Element.prototype.remove,\n      ma = window.HTMLElement,\n      I = Object.getOwnPropertyDescriptor(window.HTMLElement.prototype, \"innerHTML\"),\n      na = window.HTMLElement.prototype.insertAdjacentElement,\n      oa = window.HTMLElement.prototype.insertAdjacentHTML;\n  var pa = new Set();\n  \"annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph\".split(\" \").forEach(function (a) {\n    return pa.add(a);\n  });\n\n  function qa(a) {\n    var b = pa.has(a);\n    a = /^[a-z][.0-9_a-z]*-[-.0-9_a-z]*$/.test(a);\n    return !b && a;\n  }\n\n  var ra = document.contains ? document.contains.bind(document) : document.documentElement.contains.bind(document.documentElement);\n\n  function J(a) {\n    var b = a.isConnected;\n    if (void 0 !== b) return b;\n    if (ra(a)) return !0;\n\n    for (; a && !(a.__CE_isImportDocument || a instanceof Document);) a = a.parentNode || (window.ShadowRoot && a instanceof ShadowRoot ? a.host : void 0);\n\n    return !(!a || !(a.__CE_isImportDocument || a instanceof Document));\n  }\n\n  function K(a) {\n    var b = a.children;\n    if (b) return Array.prototype.slice.call(b);\n    b = [];\n\n    for (a = a.firstChild; a; a = a.nextSibling) a.nodeType === Node.ELEMENT_NODE && b.push(a);\n\n    return b;\n  }\n\n  function L(a, b) {\n    for (; b && b !== a && !b.nextSibling;) b = b.parentNode;\n\n    return b && b !== a ? b.nextSibling : null;\n  }\n\n  function M(a, b, c) {\n    for (var f = a; f;) {\n      if (f.nodeType === Node.ELEMENT_NODE) {\n        var d = f;\n        b(d);\n        var e = d.localName;\n\n        if (\"link\" === e && \"import\" === d.getAttribute(\"rel\")) {\n          f = d.import;\n          void 0 === c && (c = new Set());\n          if (f instanceof Node && !c.has(f)) for (c.add(f), f = f.firstChild; f; f = f.nextSibling) M(f, b, c);\n          f = L(a, d);\n          continue;\n        } else if (\"template\" === e) {\n          f = L(a, d);\n          continue;\n        }\n\n        if (d = d.__CE_shadowRoot) for (d = d.firstChild; d; d = d.nextSibling) M(d, b, c);\n      }\n\n      f = f.firstChild ? f.firstChild : L(a, f);\n    }\n  }\n\n  ;\n\n  function N() {\n    var a = !(null === O || void 0 === O || !O.noDocumentConstructionObserver),\n        b = !(null === O || void 0 === O || !O.shadyDomFastWalk);\n    this.m = [];\n    this.g = [];\n    this.j = !1;\n    this.shadyDomFastWalk = b;\n    this.I = !a;\n  }\n\n  function P(a, b, c, f) {\n    var d = window.ShadyDOM;\n\n    if (a.shadyDomFastWalk && d && d.inUse) {\n      if (b.nodeType === Node.ELEMENT_NODE && c(b), b.querySelectorAll) for (a = d.nativeMethods.querySelectorAll.call(b, \"*\"), b = 0; b < a.length; b++) c(a[b]);\n    } else M(b, c, f);\n  }\n\n  function sa(a, b) {\n    a.j = !0;\n    a.m.push(b);\n  }\n\n  function ta(a, b) {\n    a.j = !0;\n    a.g.push(b);\n  }\n\n  function Q(a, b) {\n    a.j && P(a, b, function (c) {\n      return R(a, c);\n    });\n  }\n\n  function R(a, b) {\n    if (a.j && !b.__CE_patched) {\n      b.__CE_patched = !0;\n\n      for (var c = 0; c < a.m.length; c++) a.m[c](b);\n\n      for (c = 0; c < a.g.length; c++) a.g[c](b);\n    }\n  }\n\n  function S(a, b) {\n    var c = [];\n    P(a, b, function (d) {\n      return c.push(d);\n    });\n\n    for (b = 0; b < c.length; b++) {\n      var f = c[b];\n      1 === f.__CE_state ? a.connectedCallback(f) : T(a, f);\n    }\n  }\n\n  function U(a, b) {\n    var c = [];\n    P(a, b, function (d) {\n      return c.push(d);\n    });\n\n    for (b = 0; b < c.length; b++) {\n      var f = c[b];\n      1 === f.__CE_state && a.disconnectedCallback(f);\n    }\n  }\n\n  function V(a, b, c) {\n    c = void 0 === c ? {} : c;\n\n    var f = c.J,\n        d = c.upgrade || function (g) {\n      return T(a, g);\n    },\n        e = [];\n\n    P(a, b, function (g) {\n      a.j && R(a, g);\n\n      if (\"link\" === g.localName && \"import\" === g.getAttribute(\"rel\")) {\n        var h = g.import;\n        h instanceof Node && (h.__CE_isImportDocument = !0, h.__CE_registry = document.__CE_registry);\n        h && \"complete\" === h.readyState ? h.__CE_documentLoadHandled = !0 : g.addEventListener(\"load\", function () {\n          var k = g.import;\n\n          if (!k.__CE_documentLoadHandled) {\n            k.__CE_documentLoadHandled = !0;\n            var l = new Set();\n            f && (f.forEach(function (m) {\n              return l.add(m);\n            }), l.delete(k));\n            V(a, k, {\n              J: l,\n              upgrade: d\n            });\n          }\n        });\n      } else e.push(g);\n    }, f);\n\n    for (b = 0; b < e.length; b++) d(e[b]);\n  }\n\n  function T(a, b) {\n    try {\n      var c = b.ownerDocument,\n          f = c.__CE_registry;\n      var d = f && (c.defaultView || c.__CE_isImportDocument) ? W(f, b.localName) : void 0;\n\n      if (d && void 0 === b.__CE_state) {\n        d.constructionStack.push(b);\n\n        try {\n          try {\n            if (new d.constructorFunction() !== b) throw Error(\"The custom element constructor did not produce the element being upgraded.\");\n          } finally {\n            d.constructionStack.pop();\n          }\n        } catch (k) {\n          throw b.__CE_state = 2, k;\n        }\n\n        b.__CE_state = 1;\n        b.__CE_definition = d;\n\n        if (d.attributeChangedCallback && b.hasAttributes()) {\n          var e = d.observedAttributes;\n\n          for (d = 0; d < e.length; d++) {\n            var g = e[d],\n                h = b.getAttribute(g);\n            null !== h && a.attributeChangedCallback(b, g, null, h, null);\n          }\n        }\n\n        J(b) && a.connectedCallback(b);\n      }\n    } catch (k) {\n      X(k);\n    }\n  }\n\n  N.prototype.connectedCallback = function (a) {\n    var b = a.__CE_definition;\n    if (b.connectedCallback) try {\n      b.connectedCallback.call(a);\n    } catch (c) {\n      X(c);\n    }\n  };\n\n  N.prototype.disconnectedCallback = function (a) {\n    var b = a.__CE_definition;\n    if (b.disconnectedCallback) try {\n      b.disconnectedCallback.call(a);\n    } catch (c) {\n      X(c);\n    }\n  };\n\n  N.prototype.attributeChangedCallback = function (a, b, c, f, d) {\n    var e = a.__CE_definition;\n    if (e.attributeChangedCallback && -1 < e.observedAttributes.indexOf(b)) try {\n      e.attributeChangedCallback.call(a, b, c, f, d);\n    } catch (g) {\n      X(g);\n    }\n  };\n\n  function ua(a, b, c, f) {\n    var d = b.__CE_registry;\n    if (d && (null === f || \"http://www.w3.org/1999/xhtml\" === f) && (d = W(d, c))) try {\n      var e = new d.constructorFunction();\n      if (void 0 === e.__CE_state || void 0 === e.__CE_definition) throw Error(\"Failed to construct '\" + c + \"': The returned value was not constructed with the HTMLElement constructor.\");\n      if (\"http://www.w3.org/1999/xhtml\" !== e.namespaceURI) throw Error(\"Failed to construct '\" + c + \"': The constructed element's namespace must be the HTML namespace.\");\n      if (e.hasAttributes()) throw Error(\"Failed to construct '\" + c + \"': The constructed element must not have any attributes.\");\n      if (null !== e.firstChild) throw Error(\"Failed to construct '\" + c + \"': The constructed element must not have any children.\");\n      if (null !== e.parentNode) throw Error(\"Failed to construct '\" + c + \"': The constructed element must not have a parent node.\");\n      if (e.ownerDocument !== b) throw Error(\"Failed to construct '\" + c + \"': The constructed element's owner document is incorrect.\");\n      if (e.localName !== c) throw Error(\"Failed to construct '\" + c + \"': The constructed element's local name is incorrect.\");\n      return e;\n    } catch (g) {\n      return X(g), b = null === f ? n.call(b, c) : p.call(b, f, c), Object.setPrototypeOf(b, HTMLUnknownElement.prototype), b.__CE_state = 2, b.__CE_definition = void 0, R(a, b), b;\n    }\n    b = null === f ? n.call(b, c) : p.call(b, f, c);\n    R(a, b);\n    return b;\n  }\n\n  function X(a) {\n    var b = a.message,\n        c = a.sourceURL || a.fileName || \"\",\n        f = a.line || a.lineNumber || 0,\n        d = a.column || a.columnNumber || 0,\n        e = void 0;\n    void 0 === ErrorEvent.prototype.initErrorEvent ? e = new ErrorEvent(\"error\", {\n      cancelable: !0,\n      message: b,\n      filename: c,\n      lineno: f,\n      colno: d,\n      error: a\n    }) : (e = document.createEvent(\"ErrorEvent\"), e.initErrorEvent(\"error\", !1, !0, b, c, f), e.preventDefault = function () {\n      Object.defineProperty(this, \"defaultPrevented\", {\n        configurable: !0,\n        get: function () {\n          return !0;\n        }\n      });\n    });\n    void 0 === e.error && Object.defineProperty(e, \"error\", {\n      configurable: !0,\n      enumerable: !0,\n      get: function () {\n        return a;\n      }\n    });\n    window.dispatchEvent(e);\n    e.defaultPrevented || console.error(a);\n  }\n\n  ;\n\n  function va() {\n    var a = this;\n    this.g = void 0;\n    this.F = new Promise(function (b) {\n      a.l = b;\n    });\n  }\n\n  va.prototype.resolve = function (a) {\n    if (this.g) throw Error(\"Already resolved.\");\n    this.g = a;\n    this.l(a);\n  };\n\n  function wa(a) {\n    var b = document;\n    this.l = void 0;\n    this.h = a;\n    this.g = b;\n    V(this.h, this.g);\n    \"loading\" === this.g.readyState && (this.l = new MutationObserver(this.G.bind(this)), this.l.observe(this.g, {\n      childList: !0,\n      subtree: !0\n    }));\n  }\n\n  function xa(a) {\n    a.l && a.l.disconnect();\n  }\n\n  wa.prototype.G = function (a) {\n    var b = this.g.readyState;\n    \"interactive\" !== b && \"complete\" !== b || xa(this);\n\n    for (b = 0; b < a.length; b++) for (var c = a[b].addedNodes, f = 0; f < c.length; f++) V(this.h, c[f]);\n  };\n\n  function Y(a) {\n    this.s = new Map();\n    this.u = new Map();\n    this.C = new Map();\n    this.A = !1;\n    this.B = new Map();\n\n    this.o = function (b) {\n      return b();\n    };\n\n    this.i = !1;\n    this.v = [];\n    this.h = a;\n    this.D = a.I ? new wa(a) : void 0;\n  }\n\n  Y.prototype.H = function (a, b) {\n    var c = this;\n    if (!(b instanceof Function)) throw new TypeError(\"Custom element constructor getters must be functions.\");\n    ya(this, a);\n    this.s.set(a, b);\n    this.v.push(a);\n    this.i || (this.i = !0, this.o(function () {\n      return za(c);\n    }));\n  };\n\n  Y.prototype.define = function (a, b) {\n    var c = this;\n    if (!(b instanceof Function)) throw new TypeError(\"Custom element constructors must be functions.\");\n    ya(this, a);\n    Aa(this, a, b);\n    this.v.push(a);\n    this.i || (this.i = !0, this.o(function () {\n      return za(c);\n    }));\n  };\n\n  function ya(a, b) {\n    if (!qa(b)) throw new SyntaxError(\"The element name '\" + b + \"' is not valid.\");\n    if (W(a, b)) throw Error(\"A custom element with name '\" + (b + \"' has already been defined.\"));\n    if (a.A) throw Error(\"A custom element is already being defined.\");\n  }\n\n  function Aa(a, b, c) {\n    a.A = !0;\n    var f;\n\n    try {\n      var d = c.prototype;\n      if (!(d instanceof Object)) throw new TypeError(\"The custom element constructor's prototype is not an object.\");\n\n      var e = function (m) {\n        var x = d[m];\n        if (void 0 !== x && !(x instanceof Function)) throw Error(\"The '\" + m + \"' callback must be a function.\");\n        return x;\n      };\n\n      var g = e(\"connectedCallback\");\n      var h = e(\"disconnectedCallback\");\n      var k = e(\"adoptedCallback\");\n      var l = (f = e(\"attributeChangedCallback\")) && c.observedAttributes || [];\n    } catch (m) {\n      throw m;\n    } finally {\n      a.A = !1;\n    }\n\n    c = {\n      localName: b,\n      constructorFunction: c,\n      connectedCallback: g,\n      disconnectedCallback: h,\n      adoptedCallback: k,\n      attributeChangedCallback: f,\n      observedAttributes: l,\n      constructionStack: []\n    };\n    a.u.set(b, c);\n    a.C.set(c.constructorFunction, c);\n    return c;\n  }\n\n  Y.prototype.upgrade = function (a) {\n    V(this.h, a);\n  };\n\n  function za(a) {\n    if (!1 !== a.i) {\n      a.i = !1;\n\n      for (var b = [], c = a.v, f = new Map(), d = 0; d < c.length; d++) f.set(c[d], []);\n\n      V(a.h, document, {\n        upgrade: function (k) {\n          if (void 0 === k.__CE_state) {\n            var l = k.localName,\n                m = f.get(l);\n            m ? m.push(k) : a.u.has(l) && b.push(k);\n          }\n        }\n      });\n\n      for (d = 0; d < b.length; d++) T(a.h, b[d]);\n\n      for (d = 0; d < c.length; d++) {\n        for (var e = c[d], g = f.get(e), h = 0; h < g.length; h++) T(a.h, g[h]);\n\n        (e = a.B.get(e)) && e.resolve(void 0);\n      }\n\n      c.length = 0;\n    }\n  }\n\n  Y.prototype.get = function (a) {\n    if (a = W(this, a)) return a.constructorFunction;\n  };\n\n  Y.prototype.whenDefined = function (a) {\n    if (!qa(a)) return Promise.reject(new SyntaxError(\"'\" + a + \"' is not a valid custom element name.\"));\n    var b = this.B.get(a);\n    if (b) return b.F;\n    b = new va();\n    this.B.set(a, b);\n    var c = this.u.has(a) || this.s.has(a);\n    a = -1 === this.v.indexOf(a);\n    c && a && b.resolve(void 0);\n    return b.F;\n  };\n\n  Y.prototype.polyfillWrapFlushCallback = function (a) {\n    this.D && xa(this.D);\n    var b = this.o;\n\n    this.o = function (c) {\n      return a(function () {\n        return b(c);\n      });\n    };\n  };\n\n  function W(a, b) {\n    var c = a.u.get(b);\n    if (c) return c;\n\n    if (c = a.s.get(b)) {\n      a.s.delete(b);\n\n      try {\n        return Aa(a, b, c());\n      } catch (f) {\n        X(f);\n      }\n    }\n  }\n\n  window.CustomElementRegistry = Y;\n  Y.prototype.define = Y.prototype.define;\n  Y.prototype.upgrade = Y.prototype.upgrade;\n  Y.prototype.get = Y.prototype.get;\n  Y.prototype.whenDefined = Y.prototype.whenDefined;\n  Y.prototype.polyfillDefineLazy = Y.prototype.H;\n  Y.prototype.polyfillWrapFlushCallback = Y.prototype.polyfillWrapFlushCallback;\n\n  function Z(a, b, c) {\n    function f(d) {\n      return function (e) {\n        for (var g = [], h = 0; h < arguments.length; ++h) g[h] = arguments[h];\n\n        h = [];\n\n        for (var k = [], l = 0; l < g.length; l++) {\n          var m = g[l];\n          m instanceof Element && J(m) && k.push(m);\n          if (m instanceof DocumentFragment) for (m = m.firstChild; m; m = m.nextSibling) h.push(m);else h.push(m);\n        }\n\n        d.apply(this, g);\n\n        for (g = 0; g < k.length; g++) U(a, k[g]);\n\n        if (J(this)) for (g = 0; g < h.length; g++) k = h[g], k instanceof Element && S(a, k);\n      };\n    }\n\n    void 0 !== c.prepend && (b.prepend = f(c.prepend));\n    void 0 !== c.append && (b.append = f(c.append));\n  }\n\n  ;\n\n  function Ba(a) {\n    Document.prototype.createElement = function (b) {\n      return ua(a, this, b, null);\n    };\n\n    Document.prototype.importNode = function (b, c) {\n      b = aa.call(this, b, !!c);\n      this.__CE_registry ? V(a, b) : Q(a, b);\n      return b;\n    };\n\n    Document.prototype.createElementNS = function (b, c) {\n      return ua(a, this, c, b);\n    };\n\n    Z(a, Document.prototype, {\n      prepend: ba,\n      append: ca\n    });\n  }\n\n  ;\n\n  function Ca(a) {\n    function b(f) {\n      return function (d) {\n        for (var e = [], g = 0; g < arguments.length; ++g) e[g] = arguments[g];\n\n        g = [];\n\n        for (var h = [], k = 0; k < e.length; k++) {\n          var l = e[k];\n          l instanceof Element && J(l) && h.push(l);\n          if (l instanceof DocumentFragment) for (l = l.firstChild; l; l = l.nextSibling) g.push(l);else g.push(l);\n        }\n\n        f.apply(this, e);\n\n        for (e = 0; e < h.length; e++) U(a, h[e]);\n\n        if (J(this)) for (e = 0; e < g.length; e++) h = g[e], h instanceof Element && S(a, h);\n      };\n    }\n\n    var c = Element.prototype;\n    void 0 !== ia && (c.before = b(ia));\n    void 0 !== ja && (c.after = b(ja));\n    void 0 !== ka && (c.replaceWith = function (f) {\n      for (var d = [], e = 0; e < arguments.length; ++e) d[e] = arguments[e];\n\n      e = [];\n\n      for (var g = [], h = 0; h < d.length; h++) {\n        var k = d[h];\n        k instanceof Element && J(k) && g.push(k);\n        if (k instanceof DocumentFragment) for (k = k.firstChild; k; k = k.nextSibling) e.push(k);else e.push(k);\n      }\n\n      h = J(this);\n      ka.apply(this, d);\n\n      for (d = 0; d < g.length; d++) U(a, g[d]);\n\n      if (h) for (U(a, this), d = 0; d < e.length; d++) g = e[d], g instanceof Element && S(a, g);\n    });\n    void 0 !== la && (c.remove = function () {\n      var f = J(this);\n      la.call(this);\n      f && U(a, this);\n    });\n  }\n\n  ;\n\n  function Da(a) {\n    function b(d, e) {\n      Object.defineProperty(d, \"innerHTML\", {\n        enumerable: e.enumerable,\n        configurable: !0,\n        get: e.get,\n        set: function (g) {\n          var h = this,\n              k = void 0;\n          J(this) && (k = [], P(a, this, function (x) {\n            x !== h && k.push(x);\n          }));\n          e.set.call(this, g);\n          if (k) for (var l = 0; l < k.length; l++) {\n            var m = k[l];\n            1 === m.__CE_state && a.disconnectedCallback(m);\n          }\n          this.ownerDocument.__CE_registry ? V(a, this) : Q(a, this);\n          return g;\n        }\n      });\n    }\n\n    function c(d, e) {\n      d.insertAdjacentElement = function (g, h) {\n        var k = J(h);\n        g = e.call(this, g, h);\n        k && U(a, h);\n        J(g) && S(a, h);\n        return g;\n      };\n    }\n\n    function f(d, e) {\n      function g(h, k) {\n        for (var l = []; h !== k; h = h.nextSibling) l.push(h);\n\n        for (k = 0; k < l.length; k++) V(a, l[k]);\n      }\n\n      d.insertAdjacentHTML = function (h, k) {\n        h = h.toLowerCase();\n\n        if (\"beforebegin\" === h) {\n          var l = this.previousSibling;\n          e.call(this, h, k);\n          g(l || this.parentNode.firstChild, this);\n        } else if (\"afterbegin\" === h) l = this.firstChild, e.call(this, h, k), g(this.firstChild, l);else if (\"beforeend\" === h) l = this.lastChild, e.call(this, h, k), g(l || this.firstChild, null);else if (\"afterend\" === h) l = this.nextSibling, e.call(this, h, k), g(this.nextSibling, l);else throw new SyntaxError(\"The value provided (\" + String(h) + \") is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'.\");\n      };\n    }\n\n    y && (Element.prototype.attachShadow = function (d) {\n      d = y.call(this, d);\n\n      if (a.j && !d.__CE_patched) {\n        d.__CE_patched = !0;\n\n        for (var e = 0; e < a.m.length; e++) a.m[e](d);\n      }\n\n      return this.__CE_shadowRoot = d;\n    });\n    z && z.get ? b(Element.prototype, z) : I && I.get ? b(HTMLElement.prototype, I) : ta(a, function (d) {\n      b(d, {\n        enumerable: !0,\n        configurable: !0,\n        get: function () {\n          return q.call(this, !0).innerHTML;\n        },\n        set: function (e) {\n          var g = \"template\" === this.localName,\n              h = g ? this.content : this,\n              k = p.call(document, this.namespaceURI, this.localName);\n\n          for (k.innerHTML = e; 0 < h.childNodes.length;) u.call(h, h.childNodes[0]);\n\n          for (e = g ? k.content : k; 0 < e.childNodes.length;) r.call(h, e.childNodes[0]);\n        }\n      });\n    });\n\n    Element.prototype.setAttribute = function (d, e) {\n      if (1 !== this.__CE_state) return B.call(this, d, e);\n      var g = A.call(this, d);\n      B.call(this, d, e);\n      e = A.call(this, d);\n      a.attributeChangedCallback(this, d, g, e, null);\n    };\n\n    Element.prototype.setAttributeNS = function (d, e, g) {\n      if (1 !== this.__CE_state) return E.call(this, d, e, g);\n      var h = D.call(this, d, e);\n      E.call(this, d, e, g);\n      g = D.call(this, d, e);\n      a.attributeChangedCallback(this, e, h, g, d);\n    };\n\n    Element.prototype.removeAttribute = function (d) {\n      if (1 !== this.__CE_state) return C.call(this, d);\n      var e = A.call(this, d);\n      C.call(this, d);\n      null !== e && a.attributeChangedCallback(this, d, e, null, null);\n    };\n\n    Element.prototype.removeAttributeNS = function (d, e) {\n      if (1 !== this.__CE_state) return F.call(this, d, e);\n      var g = D.call(this, d, e);\n      F.call(this, d, e);\n      var h = D.call(this, d, e);\n      g !== h && a.attributeChangedCallback(this, e, g, h, d);\n    };\n\n    na ? c(HTMLElement.prototype, na) : G && c(Element.prototype, G);\n    oa ? f(HTMLElement.prototype, oa) : H && f(Element.prototype, H);\n    Z(a, Element.prototype, {\n      prepend: fa,\n      append: ha\n    });\n    Ca(a);\n  }\n\n  ;\n  var Ea = {};\n\n  function Fa(a) {\n    function b() {\n      var c = this.constructor;\n\n      var f = document.__CE_registry.C.get(c);\n\n      if (!f) throw Error(\"Failed to construct a custom element: The constructor was not registered with `customElements`.\");\n      var d = f.constructionStack;\n      if (0 === d.length) return d = n.call(document, f.localName), Object.setPrototypeOf(d, c.prototype), d.__CE_state = 1, d.__CE_definition = f, R(a, d), d;\n      var e = d.length - 1,\n          g = d[e];\n      if (g === Ea) throw Error(\"Failed to construct '\" + f.localName + \"': This element was already constructed.\");\n      d[e] = Ea;\n      Object.setPrototypeOf(g, c.prototype);\n      R(a, g);\n      return g;\n    }\n\n    b.prototype = ma.prototype;\n    Object.defineProperty(HTMLElement.prototype, \"constructor\", {\n      writable: !0,\n      configurable: !0,\n      enumerable: !1,\n      value: b\n    });\n    window.HTMLElement = b;\n  }\n\n  ;\n\n  function Ga(a) {\n    function b(c, f) {\n      Object.defineProperty(c, \"textContent\", {\n        enumerable: f.enumerable,\n        configurable: !0,\n        get: f.get,\n        set: function (d) {\n          if (this.nodeType === Node.TEXT_NODE) f.set.call(this, d);else {\n            var e = void 0;\n\n            if (this.firstChild) {\n              var g = this.childNodes,\n                  h = g.length;\n\n              if (0 < h && J(this)) {\n                e = Array(h);\n\n                for (var k = 0; k < h; k++) e[k] = g[k];\n              }\n            }\n\n            f.set.call(this, d);\n            if (e) for (d = 0; d < e.length; d++) U(a, e[d]);\n          }\n        }\n      });\n    }\n\n    Node.prototype.insertBefore = function (c, f) {\n      if (c instanceof DocumentFragment) {\n        var d = K(c);\n        c = t.call(this, c, f);\n        if (J(this)) for (f = 0; f < d.length; f++) S(a, d[f]);\n        return c;\n      }\n\n      d = c instanceof Element && J(c);\n      f = t.call(this, c, f);\n      d && U(a, c);\n      J(this) && S(a, c);\n      return f;\n    };\n\n    Node.prototype.appendChild = function (c) {\n      if (c instanceof DocumentFragment) {\n        var f = K(c);\n        c = r.call(this, c);\n        if (J(this)) for (var d = 0; d < f.length; d++) S(a, f[d]);\n        return c;\n      }\n\n      f = c instanceof Element && J(c);\n      d = r.call(this, c);\n      f && U(a, c);\n      J(this) && S(a, c);\n      return d;\n    };\n\n    Node.prototype.cloneNode = function (c) {\n      c = q.call(this, !!c);\n      this.ownerDocument.__CE_registry ? V(a, c) : Q(a, c);\n      return c;\n    };\n\n    Node.prototype.removeChild = function (c) {\n      var f = c instanceof Element && J(c),\n          d = u.call(this, c);\n      f && U(a, c);\n      return d;\n    };\n\n    Node.prototype.replaceChild = function (c, f) {\n      if (c instanceof DocumentFragment) {\n        var d = K(c);\n        c = v.call(this, c, f);\n        if (J(this)) for (U(a, f), f = 0; f < d.length; f++) S(a, d[f]);\n        return c;\n      }\n\n      d = c instanceof Element && J(c);\n      var e = v.call(this, c, f),\n          g = J(this);\n      g && U(a, f);\n      d && U(a, c);\n      g && S(a, c);\n      return e;\n    };\n\n    w && w.get ? b(Node.prototype, w) : sa(a, function (c) {\n      b(c, {\n        enumerable: !0,\n        configurable: !0,\n        get: function () {\n          for (var f = [], d = this.firstChild; d; d = d.nextSibling) d.nodeType !== Node.COMMENT_NODE && f.push(d.textContent);\n\n          return f.join(\"\");\n        },\n        set: function (f) {\n          for (; this.firstChild;) u.call(this, this.firstChild);\n\n          null != f && \"\" !== f && r.call(this, document.createTextNode(f));\n        }\n      });\n    });\n  }\n\n  ;\n  var O = window.customElements;\n\n  function Ha() {\n    var a = new N();\n    Fa(a);\n    Ba(a);\n    Z(a, DocumentFragment.prototype, {\n      prepend: da,\n      append: ea\n    });\n    Ga(a);\n    Da(a);\n    a = new Y(a);\n    document.__CE_registry = a;\n    Object.defineProperty(window, \"customElements\", {\n      configurable: !0,\n      enumerable: !0,\n      value: a\n    });\n  }\n\n  O && !O.forcePolyfill && \"function\" == typeof O.define && \"function\" == typeof O.get || Ha();\n  window.__CE_installPolyfill = Ha;\n}).call(self);","map":{"version":3,"mappings":"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","names":["Document_createElement","window","Document","prototype","createElement","Document_createElementNS","createElementNS","Document_importNode","importNode","Document_prepend","prepend","Document_append","append","DocumentFragment_prepend","DocumentFragment","DocumentFragment_append","Node_cloneNode","Node","cloneNode","Node_appendChild","appendChild","Node_insertBefore","insertBefore","Node_removeChild","removeChild","Node_replaceChild","replaceChild","Node_textContent","Object","getOwnPropertyDescriptor","Element_attachShadow","Element","attachShadow","Element_innerHTML","Element_getAttribute","getAttribute","Element_setAttribute","setAttribute","Element_removeAttribute","removeAttribute","Element_getAttributeNS","getAttributeNS","Element_setAttributeNS","setAttributeNS","Element_removeAttributeNS","removeAttributeNS","Element_insertAdjacentElement","insertAdjacentElement","Element_insertAdjacentHTML","insertAdjacentHTML","Element_prepend","Element_append","Element_before","before","Element_after","after","Element_replaceWith","replaceWith","Element_remove","remove","HTMLElement","HTMLElement_innerHTML","HTMLElement_insertAdjacentElement","HTMLElement_insertAdjacentHTML","reservedElementNameSet","Set","forEach","item","add","isValidCustomElementName","localName","reserved","has","validForm","test","nativeContains","document","contains","bind","documentElement","isConnected","node","nativeValue","undefined","current","__CE_isImportDocument","parentNode","ShadowRoot","host","childrenFromFragment","fragment","nativeChildren","children","Array","slice","call","n","firstChild","nextSibling","nodeType","ELEMENT_NODE","push","nextSiblingOrAncestorSibling","root","start","walkDeepDescendantElements","callback","visitedImports","element","import","child","shadowRoot","__CE_shadowRoot","constructor","CustomElementInternals","noDocumentConstructionObserver","priorCustomElements","shadyDomFastWalk","useDocumentConstructionObserver","forEachElement","sd","ShadyDOM","a","inUse","querySelectorAll","elements","i","nativeMethods","length","addNodePatch","patch","_hasPatches","_patchesNode","addElementPatch","_patchesElement","patchTree","patchElement","__CE_patched","connectTree","custom","__CE_state","connectedCallback","upgradeReaction","disconnectTree","disconnectedCallback","patchAndUpgradeTree","options","upgrade","gatherElements","__CE_registry","readyState","__CE_documentLoadHandled","addEventListener","clonedVisitedImports","delete","ownerDocument","registry","doc","defaultView","internal_localNameToDefinition","definition","constructionStack","result","constructorFunction","Error","pop","e","failed","__CE_definition","attributeChangedCallback","hasAttributes","observedAttributes","name","value","_upgradeAnElement","reportTheException","N","oldValue","newValue","namespace","indexOf","createAnElement","ua","NS_HTML","namespaceURI","setPrototypeOf","HTMLUnknownElement","errorArg","message","filename","sourceURL","fileName","lineno","line","lineNumber","colno","column","columnNumber","event","ErrorEvent","initErrorEvent","cancelable","error","createEvent","preventDefault","event.preventDefault","defineProperty","configurable","get","enumerable","dispatchEvent","defaultPrevented","console","Deferred","_promise","Promise","resolve","_resolve","va","_value","DocumentConstructionObserver","internals","_internals","_document","_observer","MutationObserver","_handleMutations","observe","childList","subtree","disconnect","wa","mutations","addedNodes","j","CustomElementRegistry","Map","this._flushCallback","fn","_documentConstructionObserver","Y","polyfillDefineLazy","constructorGetter","Function","TypeError","internal_assertCanDefineLocalName","_localNameToConstructorGetter","set","_unflushedLocalNames","_flushPending","_flushCallback","define","internal_reifyDefinition","SyntaxError","_elementDefinitionIsRunning","getCallback","callbackValue","adoptedCallback","_localNameToDefinition","_constructorToDefinition","_flush","za","elementsWithStableDefinitions","unflushedLocalNames","elementsWithPendingDefinitions","pendingElements","pendingUpgradableElements","deferred","_whenDefinedDeferred","whenDefined","reject","prior","anyDefinitionExists","definitionHasFlushed","outer","polyfillWrapFlushCallback","inner","flush","W","existingDefinition","destination","builtIn","appendPrependPatch","builtInMethod","nodes","g","arguments","flattenedNodes","connectedElements","apply","Document.prototype.createElement","Document.prototype.importNode","deep","clone","Document.prototype.createElementNS","PatchParentNode","beforeAfterPatch","destination.replaceWith","d","wasConnected","destination.remove","patch_innerHTML","baseDescriptor","htmlString","removedElements","h","patch_insertAdjacentElement","baseMethod","destination.insertAdjacentElement","position","insertedElement","patch_insertAdjacentHTML","upgradeNodesInRange","end","destination.insertAdjacentHTML","text","strPosition","toLowerCase","marker","previousSibling","lastChild","String","Element.prototype.attachShadow","init","innerHTML","assignedValue","isTemplate","content","rawElement","childNodes","container","Element.prototype.setAttribute","Element.prototype.setAttributeNS","Element.prototype.removeAttribute","Element.prototype.removeAttributeNS","PatchChildNode","alreadyConstructedMarker","PatchedHTMLElement","lastIndex","writable","patch_textContent","TEXT_NODE","removedNodes","childNodesLength","Node.prototype.insertBefore","refNode","insertedNodes","nativeResult","nodeWasConnectedElement","Node.prototype.appendChild","Node.prototype.cloneNode","Node.prototype.removeChild","Node.prototype.replaceChild","nodeToInsert","nodeToRemove","nodeToInsertWasConnectedElement","thisIsConnected","parts","COMMENT_NODE","textContent","join","createTextNode","customElements","installPolyfill","PatchHTMLElement","PatchDocument","PatchNode","PatchElement","forcePolyfill","__CE_installPolyfill"],"sources":["/Users/hitansh/HTM/-Polygon-Wallet/node_modules/@webcomponents/custom-elements/ts_src/Patch/Native.ts","/Users/hitansh/HTM/-Polygon-Wallet/node_modules/@webcomponents/custom-elements/ts_src/Utilities.ts","/Users/hitansh/HTM/-Polygon-Wallet/node_modules/@webcomponents/custom-elements/ts_src/CustomElementInternals.ts","/Users/hitansh/HTM/-Polygon-Wallet/node_modules/@webcomponents/custom-elements/ts_src/custom-elements.ts","/Users/hitansh/HTM/-Polygon-Wallet/node_modules/@webcomponents/custom-elements/ts_src/CustomElementState.ts","/Users/hitansh/HTM/-Polygon-Wallet/node_modules/@webcomponents/custom-elements/ts_src/Deferred.ts","/Users/hitansh/HTM/-Polygon-Wallet/node_modules/@webcomponents/custom-elements/ts_src/DocumentConstructionObserver.ts","/Users/hitansh/HTM/-Polygon-Wallet/node_modules/@webcomponents/custom-elements/ts_src/CustomElementRegistry.ts","/Users/hitansh/HTM/-Polygon-Wallet/node_modules/@webcomponents/custom-elements/ts_src/Patch/Interface/ParentNode.ts","/Users/hitansh/HTM/-Polygon-Wallet/node_modules/@webcomponents/custom-elements/ts_src/Patch/Document.ts","/Users/hitansh/HTM/-Polygon-Wallet/node_modules/@webcomponents/custom-elements/ts_src/Patch/Interface/ChildNode.ts","/Users/hitansh/HTM/-Polygon-Wallet/node_modules/@webcomponents/custom-elements/ts_src/Patch/Element.ts","/Users/hitansh/HTM/-Polygon-Wallet/node_modules/@webcomponents/custom-elements/ts_src/AlreadyConstructedMarker.ts","/Users/hitansh/HTM/-Polygon-Wallet/node_modules/@webcomponents/custom-elements/ts_src/Patch/HTMLElement.ts","/Users/hitansh/HTM/-Polygon-Wallet/node_modules/@webcomponents/custom-elements/ts_src/Patch/Node.ts","/Users/hitansh/HTM/-Polygon-Wallet/node_modules/@webcomponents/custom-elements/ts_src/Patch/DocumentFragment.ts"],"sourcesContent":["/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nexport const Document_createElement = window.Document.prototype.createElement;\nexport const Document_createElementNS =\n  window.Document.prototype.createElementNS;\nexport const Document_importNode = window.Document.prototype.importNode;\n\nexport const Document_prepend = window.Document.prototype['prepend'];\nexport const Document_append = window.Document.prototype['append'];\nexport const DocumentFragment_prepend =\n  window.DocumentFragment.prototype['prepend'];\nexport const DocumentFragment_append =\n  window.DocumentFragment.prototype['append'];\nexport const Node_cloneNode = window.Node.prototype.cloneNode;\nexport const Node_appendChild = window.Node.prototype.appendChild;\nexport const Node_insertBefore = window.Node.prototype.insertBefore;\nexport const Node_removeChild = window.Node.prototype.removeChild;\nexport const Node_replaceChild = window.Node.prototype.replaceChild;\nexport const Node_textContent = Object.getOwnPropertyDescriptor(\n  window.Node.prototype,\n  'textContent'\n);\nexport const Element_attachShadow = window.Element.prototype['attachShadow'];\nexport const Element_innerHTML = Object.getOwnPropertyDescriptor(\n  window.Element.prototype,\n  'innerHTML'\n);\nexport const Element_getAttribute = window.Element.prototype.getAttribute;\nexport const Element_setAttribute = window.Element.prototype.setAttribute;\nexport const Element_removeAttribute = window.Element.prototype.removeAttribute;\nexport const Element_getAttributeNS = window.Element.prototype.getAttributeNS;\nexport const Element_setAttributeNS = window.Element.prototype.setAttributeNS;\nexport const Element_removeAttributeNS =\n  window.Element.prototype.removeAttributeNS;\nexport const Element_insertAdjacentElement =\n  window.Element.prototype['insertAdjacentElement'];\nexport const Element_insertAdjacentHTML =\n  window.Element.prototype['insertAdjacentHTML'];\nexport const Element_prepend = window.Element.prototype['prepend'];\nexport const Element_append = window.Element.prototype['append'];\nexport const Element_before = window.Element.prototype['before'];\nexport const Element_after = window.Element.prototype['after'];\nexport const Element_replaceWith = window.Element.prototype['replaceWith'];\nexport const Element_remove = window.Element.prototype['remove'];\nexport const HTMLElement = window.HTMLElement;\nexport const HTMLElement_innerHTML = Object.getOwnPropertyDescriptor(\n  window.HTMLElement.prototype,\n  'innerHTML'\n);\nexport const HTMLElement_insertAdjacentElement =\n  window.HTMLElement.prototype['insertAdjacentElement'];\nexport const HTMLElement_insertAdjacentHTML =\n  window.HTMLElement.prototype['insertAdjacentHTML'];\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nconst reservedElementNameSet = new Set<string>();\n// IE11 does not support constructing a set using an iterable.\n[\n  'annotation-xml',\n  'color-profile',\n  'font-face',\n  'font-face-src',\n  'font-face-uri',\n  'font-face-format',\n  'font-face-name',\n  'missing-glyph',\n].forEach((item) => reservedElementNameSet.add(item));\n\nexport function isValidCustomElementName(localName: string) {\n  const reserved = reservedElementNameSet.has(localName);\n  const validForm = /^[a-z][.0-9_a-z]*-[-.0-9_a-z]*$/.test(localName);\n  return !reserved && validForm;\n}\n\n// Note, IE11 doesn't have `document.contains`.\nconst nativeContains = document.contains\n  ? document.contains.bind(document)\n  : document.documentElement.contains.bind(document.documentElement);\n\nexport function isConnected(node: Node) {\n  // Use `Node#isConnected`, if defined.\n  const nativeValue = node.isConnected;\n  if (nativeValue !== undefined) {\n    return nativeValue;\n  }\n  // Optimization: It's significantly faster here to try to use `contains`,\n  // especially on Edge/IE/\n  if (nativeContains(node)) {\n    return true;\n  }\n\n  let current: Node | undefined = node;\n  while (\n    current &&\n    !(current.__CE_isImportDocument || current instanceof Document)\n  ) {\n    current =\n      current.parentNode ||\n      (window.ShadowRoot && current instanceof ShadowRoot\n        ? current.host\n        : undefined);\n  }\n  return !!(\n    current &&\n    (current.__CE_isImportDocument || current instanceof Document)\n  );\n}\n\nexport function childrenFromFragment(\n  fragment: DocumentFragment\n): Array<Element> {\n  // Note, IE doesn't have `children` on document fragments.\n  const nativeChildren = fragment.children;\n  if (nativeChildren) {\n    return Array.prototype.slice.call(nativeChildren);\n  }\n  const children: Array<Element> = [];\n  for (let n = fragment.firstChild; n; n = n.nextSibling) {\n    if (n.nodeType === Node.ELEMENT_NODE) {\n      children.push(n as Element);\n    }\n  }\n  return children;\n}\n\nfunction nextSiblingOrAncestorSibling(root: Node, start: Node) {\n  let node: Node | null = start;\n  while (node && node !== root && !node.nextSibling) {\n    node = node.parentNode;\n  }\n  return !node || node === root ? null : node.nextSibling;\n}\n\nfunction nextNode(root: Node, start: Node) {\n  return start.firstChild\n    ? start.firstChild\n    : nextSiblingOrAncestorSibling(root, start);\n}\n\nexport function walkDeepDescendantElements(\n  root: Node,\n  callback: (elem: Element) => void,\n  visitedImports?: Set<Node>\n) {\n  let node: Node | null = root;\n  while (node) {\n    if (node.nodeType === Node.ELEMENT_NODE) {\n      const element = node as Element;\n\n      callback(element);\n\n      const localName = element.localName;\n      if (localName === 'link' && element.getAttribute('rel') === 'import') {\n        // If this import (polyfilled or not) has its root node available,\n        // walk it.\n        const importNode = (element as HTMLLinkElement).import;\n        if (visitedImports === undefined) {\n          visitedImports = new Set();\n        }\n        if (importNode instanceof Node && !visitedImports.has(importNode)) {\n          // Prevent multiple walks of the same import root.\n          visitedImports.add(importNode);\n\n          for (\n            let child = importNode.firstChild;\n            child;\n            child = child.nextSibling\n          ) {\n            walkDeepDescendantElements(child, callback, visitedImports);\n          }\n        }\n\n        // Ignore descendants of import links to prevent attempting to walk the\n        // elements created by the HTML Imports polyfill that we just walked\n        // above.\n        node = nextSiblingOrAncestorSibling(root, element);\n        continue;\n      } else if (localName === 'template') {\n        // Ignore descendants of templates. There shouldn't be any descendants\n        // because they will be moved into `.content` during construction in\n        // browsers that support template but, in case they exist and are still\n        // waiting to be moved by a polyfill, they will be ignored.\n        node = nextSiblingOrAncestorSibling(root, element);\n        continue;\n      }\n\n      // Walk shadow roots.\n      const shadowRoot = element.__CE_shadowRoot;\n      if (shadowRoot) {\n        for (\n          let child = shadowRoot.firstChild;\n          child;\n          child = child.nextSibling\n        ) {\n          walkDeepDescendantElements(child, callback, visitedImports);\n        }\n      }\n    }\n\n    node = nextNode(root, node);\n  }\n}\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nimport CustomElementRegistry from './CustomElementRegistry.js';\nimport {CustomElementState as CEState} from './CustomElementState.js';\nimport * as Native from './Patch/Native.js';\nimport * as Utilities from './Utilities.js';\n\nconst NS_HTML = 'http://www.w3.org/1999/xhtml';\n\nexport default class CustomElementInternals {\n  private readonly _patchesNode: Array<(node: Node) => void> = [];\n  private readonly _patchesElement: Array<(elem: Element) => void> = [];\n  private _hasPatches = false;\n  public readonly shadyDomFastWalk: boolean;\n  public readonly useDocumentConstructionObserver: boolean;\n\n  constructor(options: {\n    shadyDomFastWalk: boolean;\n    noDocumentConstructionObserver: boolean;\n  }) {\n    this.shadyDomFastWalk = options.shadyDomFastWalk;\n    this.useDocumentConstructionObserver = !options.noDocumentConstructionObserver;\n  }\n\n  forEachElement(\n    node: Node,\n    callback: (elem: Element) => void,\n    visitedImports?: Set<Node>\n  ) {\n    const sd = window['ShadyDOM'];\n    if (this.shadyDomFastWalk && sd && sd['inUse']) {\n      if (node.nodeType === Node.ELEMENT_NODE) {\n        const element = node as Element;\n        callback(element);\n      }\n      // most easily gets to document, element, documentFragment\n      if ((node as Element).querySelectorAll!) {\n        const elements = sd['nativeMethods'].querySelectorAll.call(node, '*');\n        for (let i = 0; i < elements.length; i++) {\n          callback(elements[i]);\n        }\n      }\n    } else {\n      Utilities.walkDeepDescendantElements(node, callback, visitedImports);\n    }\n  }\n\n  addNodePatch(patch: (node: Node) => void) {\n    this._hasPatches = true;\n    this._patchesNode.push(patch);\n  }\n\n  addElementPatch(patch: (element: Element) => void) {\n    this._hasPatches = true;\n    this._patchesElement.push(patch);\n  }\n\n  patchTree(node: Node) {\n    if (!this._hasPatches) {\n      return;\n    }\n\n    this.forEachElement(node, (element) => this.patchElement(element));\n  }\n\n  patchNode(node: Node) {\n    if (!this._hasPatches) {\n      return;\n    }\n\n    if (node.__CE_patched) {\n      return;\n    }\n    node.__CE_patched = true;\n\n    for (let i = 0; i < this._patchesNode.length; i++) {\n      this._patchesNode[i](node);\n    }\n  }\n\n  patchElement(element: Element) {\n    if (!this._hasPatches) {\n      return;\n    }\n\n    if (element.__CE_patched) {\n      return;\n    }\n    element.__CE_patched = true;\n\n    for (let i = 0; i < this._patchesNode.length; i++) {\n      this._patchesNode[i](element);\n    }\n\n    for (let i = 0; i < this._patchesElement.length; i++) {\n      this._patchesElement[i](element);\n    }\n  }\n\n  connectTree(root: Node) {\n    const elements: Array<Element> = [];\n\n    this.forEachElement(root, (element) => elements.push(element));\n\n    for (let i = 0; i < elements.length; i++) {\n      const element = elements[i];\n      if (element.__CE_state === CEState.custom) {\n        this.connectedCallback(element);\n      } else {\n        this.upgradeReaction(element as HTMLElement);\n      }\n    }\n  }\n\n  disconnectTree(root: Node) {\n    const elements: Array<Element> = [];\n\n    this.forEachElement(root, (element) => elements.push(element));\n\n    for (let i = 0; i < elements.length; i++) {\n      const element = elements[i];\n      if (element.__CE_state === CEState.custom) {\n        this.disconnectedCallback(element);\n      }\n    }\n  }\n\n  /**\n   * Upgrades all uncustomized custom elements at and below a root node for\n   * which there is a definition. When custom element reaction callbacks are\n   * assumed to be called synchronously (which, by the current DOM / HTML spec\n   * definitions, they are *not*), callbacks for both elements customized\n   * synchronously by the parser and elements being upgraded occur in the same\n   * relative order.\n   *\n   * NOTE: This function, when used to simulate the construction of a tree\n   * that is already created but not customized (i.e. by the parser), does\n   * *not* prevent the element from reading the 'final' (true) state of the\n   * tree. For example, the element, during truly synchronous parsing /\n   * construction would see that it contains no children as they have not yet\n   * been inserted. However, this function does not modify the tree, the\n   * element will (incorrectly) have children. Additionally, self-modification\n   * restrictions for custom element constructors imposed by the DOM spec are\n   * *not* enforced.\n   *\n   *\n   * The following nested list shows the steps extending down from the HTML\n   * spec's parsing section that cause elements to be synchronously created\n   * and upgraded:\n   *\n   * The \"in body\" insertion mode:\n   * https://html.spec.whatwg.org/multipage/syntax.html#parsing-main-inbody\n   * - Switch on token:\n   *   .. other cases ..\n   *   -> Any other start tag\n   *      - [Insert an HTML element](below) for the token.\n   *\n   * Insert an HTML element:\n   * https://html.spec.whatwg.org/multipage/syntax.html#insert-an-html-element\n   * - Insert a foreign element for the token in the HTML namespace:\n   *   https://html.spec.whatwg.org/multipage/syntax.html#insert-a-foreign-element\n   *   - Create an element for a token:\n   *     https://html.spec.whatwg.org/multipage/syntax.html#create-an-element-for-the-token\n   *     - Will execute script flag is true?\n   *       - (Element queue pushed to the custom element reactions stack.)\n   *     - Create an element:\n   *       https://dom.spec.whatwg.org/#concept-create-element\n   *       - Sync CE flag is true?\n   *         - Constructor called.\n   *         - Self-modification restrictions enforced.\n   *       - Sync CE flag is false?\n   *         - (Upgrade reaction enqueued.)\n   *     - Attributes appended to element.\n   *       (`attributeChangedCallback` reactions enqueued.)\n   *     - Will execute script flag is true?\n   *       - (Element queue popped from the custom element reactions stack.\n   *         Reactions in the popped stack are invoked.)\n   *   - (Element queue pushed to the custom element reactions stack.)\n   *   - Insert the element:\n   *     https://dom.spec.whatwg.org/#concept-node-insert\n   *     - Shadow-including descendants are connected. During parsing\n   *       construction, there are no shadow-*excluding* descendants.\n   *       However, the constructor may have validly attached a shadow\n   *       tree to itself and added descendants to that shadow tree.\n   *       (`connectedCallback` reactions enqueued.)\n   *   - (Element queue popped from the custom element reactions stack.\n   *     Reactions in the popped stack are invoked.)\n   */\n  patchAndUpgradeTree(\n    root: Node,\n    options: {\n      visitedImports?: Set<Node>;\n      upgrade?: (elem: HTMLElement) => void;\n    } = {}\n  ) {\n    const visitedImports = options.visitedImports;\n    const upgrade =\n      options.upgrade || ((element) => this.upgradeReaction(element));\n\n    const elements: Array<Element> = [];\n\n    const gatherElements = (element: Element) => {\n      if (this._hasPatches) {\n        this.patchElement(element);\n      }\n      if (\n        element.localName === 'link' &&\n        element.getAttribute('rel') === 'import'\n      ) {\n        const importElem = element as HTMLLinkElement;\n        // The HTML Imports polyfill sets a descendant element of the link to\n        // the `import` property, specifically this is *not* a Document.\n        const importNode = importElem.import;\n\n        if (importNode instanceof Node) {\n          importNode.__CE_isImportDocument = true;\n          // Connected links are associated with the global registry.\n          importNode.__CE_registry = document.__CE_registry;\n        }\n\n        if (importNode && importNode.readyState === 'complete') {\n          importNode.__CE_documentLoadHandled = true;\n        } else {\n          // If this link's import root is not available, its contents can't\n          // be walked. Wait for 'load' and walk it when it's ready.\n          element.addEventListener('load', () => {\n            const importNode = importElem.import!;\n\n            if (importNode.__CE_documentLoadHandled) {\n              return;\n            }\n            importNode.__CE_documentLoadHandled = true;\n\n            // Clone the `visitedImports` set that was populated sync during\n            // the `patchAndUpgradeTree` call that caused this 'load' handler\n            // to be added. Then, remove *this* link's import node so that we\n            // can walk that import again, even if it was partially walked\n            // later during the same `patchAndUpgradeTree` call.\n            const clonedVisitedImports = new Set<Node>();\n            if (visitedImports) {\n              // IE11 does not support constructing a set using an iterable.\n              visitedImports.forEach((item) => clonedVisitedImports.add(item));\n              clonedVisitedImports.delete(importNode);\n            }\n            this.patchAndUpgradeTree(importNode, {\n              visitedImports: clonedVisitedImports,\n              upgrade,\n            });\n          });\n        }\n      } else {\n        elements.push(element);\n      }\n    };\n\n    // `forEachElement` populates (and internally checks against)\n    // `visitedImports` when traversing a loaded import.\n    this.forEachElement(root, gatherElements, visitedImports);\n\n    for (let i = 0; i < elements.length; i++) {\n      upgrade(elements[i] as HTMLElement);\n    }\n  }\n\n  upgradeReaction(element: HTMLElement) {\n    try {\n      const definition = this._lookupACustomElementDefinition(\n        element.ownerDocument!,\n        element.localName\n      );\n      if (definition) {\n        this._upgradeAnElement(element, definition);\n      }\n    } catch (e) {\n      this.reportTheException(e);\n    }\n  }\n\n  /**\n   * @see https://html.spec.whatwg.org/multipage/custom-elements.html#concept-upgrade-an-element\n   */\n  private _upgradeAnElement(\n    element: HTMLElement,\n    definition: CustomElementDefinition\n  ) {\n    const currentState = element.__CE_state;\n    if (currentState !== undefined) {\n      return;\n    }\n\n    definition.constructionStack.push(element);\n\n    try {\n      try {\n        const result = new definition.constructorFunction();\n        if (result !== element) {\n          throw new Error(\n            'The custom element constructor did not produce the element being upgraded.'\n          );\n        }\n      } finally {\n        definition.constructionStack.pop();\n      }\n    } catch (e) {\n      element.__CE_state = CEState.failed;\n      throw e;\n    }\n\n    element.__CE_state = CEState.custom;\n    element.__CE_definition = definition;\n\n    // Check `hasAttributes` here to avoid iterating when it's not necessary.\n    if (definition.attributeChangedCallback && element.hasAttributes()) {\n      const observedAttributes = definition.observedAttributes;\n      for (let i = 0; i < observedAttributes.length; i++) {\n        const name = observedAttributes[i];\n        const value = element.getAttribute(name);\n        if (value !== null) {\n          this.attributeChangedCallback(element, name, null, value, null);\n        }\n      }\n    }\n\n    if (Utilities.isConnected(element)) {\n      this.connectedCallback(element);\n    }\n  }\n\n  connectedCallback(element: Element) {\n    const definition = element.__CE_definition!;\n    if (definition.connectedCallback) {\n      try {\n        definition.connectedCallback.call(element);\n      } catch (e) {\n        this.reportTheException(e);\n      }\n    }\n  }\n\n  disconnectedCallback(element: Element) {\n    const definition = element.__CE_definition!;\n    if (definition.disconnectedCallback) {\n      try {\n        definition.disconnectedCallback.call(element);\n      } catch (e) {\n        this.reportTheException(e);\n      }\n    }\n  }\n\n  attributeChangedCallback(\n    element: Element,\n    name: string,\n    oldValue?: string | null,\n    newValue?: string | null,\n    namespace?: string | null\n  ) {\n    const definition = element.__CE_definition!;\n    if (\n      definition.attributeChangedCallback &&\n      definition.observedAttributes.indexOf(name) > -1\n    ) {\n      try {\n        definition.attributeChangedCallback.call(\n          element,\n          name,\n          oldValue,\n          newValue,\n          namespace\n        );\n      } catch (e) {\n        this.reportTheException(e);\n      }\n    }\n  }\n\n  /**\n   * Runs HTML's 'look up a custom element definition', excluding the namespace\n   * check.\n   *\n   * @see https://html.spec.whatwg.org/multipage/custom-elements.html#look-up-a-custom-element-definition\n   */\n  private _lookupACustomElementDefinition(\n    doc: Document,\n    localName: string\n  ): CustomElementDefinition | undefined {\n    // The document must be associated with a registry.\n    const registry = doc.__CE_registry;\n    if (!registry) {\n      return;\n    }\n\n    // Prevent elements created in documents without a browsing context from\n    // upgrading.\n    //\n    // https://html.spec.whatwg.org/multipage/custom-elements.html#look-up-a-custom-element-definition\n    //   \"If document does not have a browsing context, return null.\"\n    //\n    // https://html.spec.whatwg.org/multipage/window-object.html#dom-document-defaultview\n    //   \"The defaultView IDL attribute of the Document interface, on getting,\n    //   must return this Document's browsing context's WindowProxy object, if\n    //   this Document has an associated browsing context, or null otherwise.\"\n    if (!doc.defaultView && !doc.__CE_isImportDocument) {\n      return;\n    }\n\n    return (registry as CustomElementRegistry).internal_localNameToDefinition(\n      localName\n    );\n  }\n\n  /**\n   * Runs the DOM's 'create an element'. If namespace is not null, then the\n   * native `createElementNS` is used. Otherwise, `createElement` is used.\n   *\n   * Note, the template polyfill only wraps `createElement`, preventing this\n   * function from using `createElementNS` in all cases.\n   *\n   * @see https://dom.spec.whatwg.org/#concept-create-element\n   */\n  createAnElement(\n    doc: Document,\n    localName: string,\n    namespace: string | null\n  ): Element {\n    const registry = doc.__CE_registry;\n    // Only create custom elements if the document is associated with a\n    // registry.\n    if (registry && (namespace === null || namespace === NS_HTML)) {\n      const definition = (registry as CustomElementRegistry).internal_localNameToDefinition(\n        localName\n      );\n      if (definition) {\n        try {\n          const result = new definition.constructorFunction();\n\n          // These conformance checks can't be performed when the user calls\n          // the element's constructor themselves. However, this also true in\n          // native implementations.\n\n          if (\n            result.__CE_state === undefined ||\n            result.__CE_definition === undefined\n          ) {\n            throw new Error(\n              `Failed to construct '${localName}': ` +\n                'The returned value was not constructed with the HTMLElement ' +\n                'constructor.'\n            );\n          }\n\n          if (result.namespaceURI !== NS_HTML) {\n            throw new Error(\n              `Failed to construct '${localName}': ` +\n                \"The constructed element's namespace must be the HTML \" +\n                'namespace.'\n            );\n          }\n\n          // The following Errors should be DOMExceptions but DOMException\n          // isn't constructible in all browsers.\n\n          if (result.hasAttributes()) {\n            throw new Error(\n              `Failed to construct '${localName}': ` +\n                'The constructed element must not have any attributes.'\n            );\n          }\n\n          // ShadyDOM doesn't wrap `#hasChildNodes`, so we check `#firstChild`\n          // instead.\n          if (result.firstChild !== null) {\n            throw new Error(\n              `Failed to construct '${localName}': ` +\n                'The constructed element must not have any children.'\n            );\n          }\n\n          if (result.parentNode !== null) {\n            throw new Error(\n              `Failed to construct '${localName}': ` +\n                'The constructed element must not have a parent node.'\n            );\n          }\n\n          if (result.ownerDocument !== doc) {\n            throw new Error(\n              `Failed to construct '${localName}': ` +\n                \"The constructed element's owner document is incorrect.\"\n            );\n          }\n\n          if (result.localName !== localName) {\n            throw new Error(\n              `Failed to construct '${localName}': ` +\n                \"The constructed element's local name is incorrect.\"\n            );\n          }\n\n          return result;\n        } catch (e) {\n          this.reportTheException(e);\n\n          // When construction fails, a new HTMLUnknownElement is produced.\n          // However, there's no direct way to create one, so we create a\n          // regular HTMLElement and replace its prototype.\n          const result =\n            namespace === null\n              ? Native.Document_createElement.call(doc, localName)\n              : Native.Document_createElementNS.call(doc, namespace, localName);\n          Object.setPrototypeOf(result, HTMLUnknownElement.prototype);\n          result.__CE_state = CEState.failed;\n          result.__CE_definition = undefined;\n          this.patchElement(result);\n          return result;\n        }\n      }\n    }\n\n    const result =\n      namespace === null\n        ? Native.Document_createElement.call(doc, localName)\n        : Native.Document_createElementNS.call(doc, namespace, localName);\n    this.patchElement(result);\n    return result;\n  }\n\n  /**\n   * Runs the DOM's 'report the exception' algorithm.\n   *\n   * @see https://html.spec.whatwg.org/multipage/webappapis.html#report-the-exception\n   */\n  reportTheException(errorArg: Error) {\n    interface ExtendedError extends Error {\n      // Non-standard Safari properties.\n      sourceURL?: string;\n      line?: number;\n      column?: number;\n\n      // Non-standard Firefox properties.\n      fileName?: string;\n      lineNumber?: number;\n      columnNumber?: number;\n    }\n\n    const error = errorArg as ExtendedError;\n    const message = error.message;\n    const filename = error.sourceURL || error.fileName || '';\n    const lineno = error.line || error.lineNumber || 0;\n    const colno = error.column || error.columnNumber || 0;\n\n    let event: ErrorEvent | undefined = undefined;\n    if (ErrorEvent.prototype.initErrorEvent === undefined) {\n      event = new ErrorEvent('error', {\n        cancelable: true,\n        message,\n        filename,\n        lineno,\n        colno,\n        error,\n      });\n    } else {\n      event = document.createEvent('ErrorEvent') as ErrorEvent;\n      // initErrorEvent(type, bubbles, cancelable, message, filename, line)\n      event.initErrorEvent!('error', false, true, message, filename, lineno);\n      // Hack for IE, where ErrorEvent#preventDefault does not set\n      // #defaultPrevented to true.\n      event.preventDefault = function (this: ErrorEvent) {\n        Object.defineProperty(this, 'defaultPrevented', {\n          configurable: true,\n          get: function (this: ErrorEvent) {\n            return true;\n          },\n        });\n      };\n    }\n\n    if (event.error === undefined) {\n      Object.defineProperty(event, 'error', {\n        configurable: true,\n        enumerable: true,\n        get: function () {\n          return error;\n        },\n      });\n    }\n\n    window.dispatchEvent(event);\n    if (!event.defaultPrevented) {\n      // In 'report the exception', UAs may optionally write errors to the\n      // console if their associated ErrorEvent isn't handled during dispatch\n      // (indicated by calling `preventDefault`). In practice, these errors are\n      // always displayed.\n      console.error(error);\n    }\n  }\n}\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nimport CustomElementInternals from './CustomElementInternals.js';\nimport CustomElementRegistry from './CustomElementRegistry.js';\nimport PatchDocument from './Patch/Document.js';\nimport PatchDocumentFragment from './Patch/DocumentFragment.js';\nimport PatchElement from './Patch/Element.js';\nimport PatchHTMLElement from './Patch/HTMLElement.js';\nimport PatchNode from './Patch/Node.js';\n\nconst priorCustomElements = window['customElements'];\n\nfunction installPolyfill() {\n  const noDocumentConstructionObserver = !!priorCustomElements?.[\n    'noDocumentConstructionObserver'\n  ];\n  const shadyDomFastWalk = !!priorCustomElements?.['shadyDomFastWalk'];\n\n  const internals = new CustomElementInternals({\n    noDocumentConstructionObserver,\n    shadyDomFastWalk,\n  });\n\n  PatchHTMLElement(internals);\n  PatchDocument(internals);\n  PatchDocumentFragment(internals);\n  PatchNode(internals);\n  PatchElement(internals);\n\n  const customElements = new CustomElementRegistry(internals);\n\n  // The main document is associated with the global registry.\n  document.__CE_registry = customElements;\n\n  Object.defineProperty(window, 'customElements', {\n    configurable: true,\n    enumerable: true,\n    value: customElements,\n  });\n}\n\nif (\n  !priorCustomElements ||\n  priorCustomElements['forcePolyfill'] ||\n  typeof priorCustomElements['define'] != 'function' ||\n  typeof priorCustomElements['get'] != 'function'\n) {\n  installPolyfill();\n}\n\n// This is NOT public API and is only meant to work around a GC bug in older\n// versions of Safari that randomly removes the polyfill during tests.\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n(window as any)['__CE_installPolyfill'] = installPolyfill;\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nexport const CustomElementState = {\n  custom: 1,\n  failed: 2,\n} as const;\nexport type CustomElementState =\n  | typeof CustomElementState.custom\n  | typeof CustomElementState.failed;\n\nexport default CustomElementState;\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nexport default class Deferred<T> {\n  private _value: T | undefined = undefined;\n\n  private _resolve!: (val: T) => void;\n\n  private readonly _promise: Promise<T>;\n  constructor() {\n    this._promise = new Promise((resolve) => {\n      this._resolve = resolve;\n    });\n  }\n\n  resolve(value: T) {\n    if (this._value) {\n      throw new Error('Already resolved.');\n    }\n\n    this._value = value;\n    this._resolve(value);\n  }\n\n  toPromise() {\n    return this._promise;\n  }\n}\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nimport CustomElementInternals from './CustomElementInternals.js';\n\nexport default class DocumentConstructionObserver {\n  private readonly _internals: CustomElementInternals;\n  private readonly _document: Document;\n  private _observer: MutationObserver | undefined = undefined;\n  constructor(internals: CustomElementInternals, doc: Document) {\n    this._internals = internals;\n    this._document = doc;\n\n    // Simulate tree construction for all currently accessible nodes in the\n    // document.\n    this._internals.patchAndUpgradeTree(this._document);\n\n    if (this._document.readyState === 'loading') {\n      this._observer = new MutationObserver(this._handleMutations.bind(this));\n\n      // Nodes created by the parser are given to the observer *before* the next\n      // task runs. Inline scripts are run in a new task. This means that the\n      // observer will be able to handle the newly parsed nodes before the\n      // inline script is run.\n      this._observer.observe(this._document, {\n        childList: true,\n        subtree: true,\n      });\n    }\n  }\n\n  disconnect() {\n    if (this._observer) {\n      this._observer.disconnect();\n    }\n  }\n\n  private _handleMutations(mutations: ReadonlyArray<MutationRecord>) {\n    // Once the document's `readyState` is 'interactive' or 'complete', all new\n    // nodes created within that document will be the result of script and\n    // should be handled by patching.\n    const readyState = this._document.readyState;\n    if (readyState === 'interactive' || readyState === 'complete') {\n      this.disconnect();\n    }\n\n    for (let i = 0; i < mutations.length; i++) {\n      const addedNodes = mutations[i].addedNodes;\n      for (let j = 0; j < addedNodes.length; j++) {\n        const node = addedNodes[j];\n        this._internals.patchAndUpgradeTree(node);\n      }\n    }\n  }\n}\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nimport {AlreadyConstructedMarkerType} from './AlreadyConstructedMarker.js';\nimport CustomElementInternals from './CustomElementInternals.js';\nimport Deferred from './Deferred.js';\nimport DocumentConstructionObserver from './DocumentConstructionObserver.js';\nimport * as Utilities from './Utilities.js';\n\ninterface ElementConstructor {\n  new (): HTMLElement;\n  observedAttributes?: Array<string>;\n}\ntype ConstructorGetter = () => ElementConstructor;\n\n/**\n * @unrestricted\n */\nexport default class CustomElementRegistry {\n  private readonly _localNameToConstructorGetter = new Map<\n    string,\n    ConstructorGetter\n  >();\n  private readonly _localNameToDefinition = new Map<\n    string,\n    CustomElementDefinition\n  >();\n  private readonly _constructorToDefinition = new Map<\n    ElementConstructor,\n    CustomElementDefinition\n  >();\n  private _elementDefinitionIsRunning = false;\n  private readonly _internals: CustomElementInternals;\n  private readonly _whenDefinedDeferred = new Map<\n    string,\n    Deferred<undefined>\n  >();\n\n  /**\n   * The default flush callback triggers the document walk synchronously.\n   */\n  private _flushCallback: (fn: () => void) => void = (fn) => fn();\n  private _flushPending = false;\n\n  /**\n   * A map from `localName`s of definitions that were defined *after* the\n   * last flush to unupgraded elements matching that definition, in document\n   * order. Entries are added to this map when a definition is registered,\n   * but the list of elements is only populated during a flush after which\n   * all of the entries are removed. DO NOT edit outside of `#_flush`.\n   */\n  private readonly _unflushedLocalNames: Array<string> = [];\n\n  private readonly _documentConstructionObserver:\n    | DocumentConstructionObserver\n    | undefined;\n\n  constructor(internals: CustomElementInternals) {\n    this._internals = internals;\n    this._documentConstructionObserver = internals.useDocumentConstructionObserver\n      ? new DocumentConstructionObserver(internals, document)\n      : undefined;\n  }\n\n  polyfillDefineLazy(localName: string, constructorGetter: ConstructorGetter) {\n    if (!(constructorGetter instanceof Function)) {\n      throw new TypeError(\n        'Custom element constructor getters must be functions.'\n      );\n    }\n    this.internal_assertCanDefineLocalName(localName);\n    this._localNameToConstructorGetter.set(localName, constructorGetter);\n    this._unflushedLocalNames.push(localName);\n    // If we've already called the flush callback and it hasn't called back\n    // yet, don't call it again.\n    if (!this._flushPending) {\n      this._flushPending = true;\n      this._flushCallback(() => this._flush());\n    }\n  }\n\n  define(localName: string, constructor: Function) {\n    if (!(constructor instanceof Function)) {\n      throw new TypeError('Custom element constructors must be functions.');\n    }\n\n    this.internal_assertCanDefineLocalName(localName);\n\n    this.internal_reifyDefinition(localName, constructor as ElementConstructor);\n    this._unflushedLocalNames.push(localName);\n    // If we've already called the flush callback and it hasn't called back\n    // yet, don't call it again.\n    if (!this._flushPending) {\n      this._flushPending = true;\n      this._flushCallback(() => this._flush());\n    }\n  }\n\n  internal_assertCanDefineLocalName(localName: string) {\n    if (!Utilities.isValidCustomElementName(localName)) {\n      throw new SyntaxError(`The element name '${localName}' is not valid.`);\n    }\n\n    if (this.internal_localNameToDefinition(localName)) {\n      throw new Error(\n        `A custom element with name ` +\n          `'${localName}' has already been defined.`\n      );\n    }\n\n    if (this._elementDefinitionIsRunning) {\n      throw new Error('A custom element is already being defined.');\n    }\n  }\n\n  internal_reifyDefinition(localName: string, constructor: ElementConstructor) {\n    this._elementDefinitionIsRunning = true;\n\n    let connectedCallback: CustomElementDefinition['connectedCallback'];\n    let disconnectedCallback: CustomElementDefinition['disconnectedCallback'];\n    let adoptedCallback: CustomElementDefinition['adoptedCallback'];\n    let attributeChangedCallback: CustomElementDefinition['attributeChangedCallback'];\n    let observedAttributes: CustomElementDefinition['observedAttributes'];\n    try {\n      const prototype = constructor.prototype;\n      if (!(prototype instanceof Object)) {\n        throw new TypeError(\n          \"The custom element constructor's prototype is not an object.\"\n        );\n      }\n\n      type CEReactionCallback =\n        | 'connectedCallback'\n        | 'disconnectedCallback'\n        | 'adoptedCallback'\n        | 'attributeChangedCallback';\n      const getCallback = function getCallback(name: CEReactionCallback) {\n        const callbackValue = prototype[name];\n        if (\n          callbackValue !== undefined &&\n          !(callbackValue instanceof Function)\n        ) {\n          throw new Error(`The '${name}' callback must be a function.`);\n        }\n        return callbackValue;\n      };\n\n      connectedCallback = getCallback('connectedCallback');\n      disconnectedCallback = getCallback('disconnectedCallback');\n      adoptedCallback = getCallback('adoptedCallback');\n      attributeChangedCallback = getCallback('attributeChangedCallback');\n      // `observedAttributes` should not be read unless an\n      // `attributesChangedCallback` exists\n      observedAttributes =\n        (attributeChangedCallback && constructor['observedAttributes']) || [];\n      // eslint-disable-next-line no-useless-catch\n    } catch (e) {\n      throw e;\n    } finally {\n      this._elementDefinitionIsRunning = false;\n    }\n\n    const definition = {\n      localName,\n      constructorFunction: constructor,\n      connectedCallback,\n      disconnectedCallback,\n      adoptedCallback,\n      attributeChangedCallback,\n      observedAttributes,\n      constructionStack: [] as Array<\n        HTMLElement | AlreadyConstructedMarkerType\n      >,\n    };\n\n    this._localNameToDefinition.set(localName, definition);\n    this._constructorToDefinition.set(\n      definition.constructorFunction,\n      definition\n    );\n\n    return definition;\n  }\n\n  upgrade(node: Node): void {\n    this._internals.patchAndUpgradeTree(node);\n  }\n\n  private _flush() {\n    // If no new definitions were defined, don't attempt to flush. This could\n    // happen if a flush callback keeps the function it is given and calls it\n    // multiple times.\n    if (this._flushPending === false) {\n      return;\n    }\n    this._flushPending = false;\n\n    /**\n     * Unupgraded elements with definitions that were defined *before* the last\n     * flush, in document order.\n     */\n    const elementsWithStableDefinitions: Array<HTMLElement> = [];\n\n    const unflushedLocalNames = this._unflushedLocalNames;\n    const elementsWithPendingDefinitions = new Map<\n      string,\n      Array<HTMLElement>\n    >();\n    for (let i = 0; i < unflushedLocalNames.length; i++) {\n      elementsWithPendingDefinitions.set(unflushedLocalNames[i], []);\n    }\n\n    this._internals.patchAndUpgradeTree(document, {\n      upgrade: (element) => {\n        // Ignore the element if it has already upgraded or failed to upgrade.\n        if (element.__CE_state !== undefined) {\n          return;\n        }\n\n        const localName = element.localName;\n\n        // If there is an applicable pending definition for the element, add the\n        // element to the list of elements to be upgraded with that definition.\n        const pendingElements = elementsWithPendingDefinitions.get(localName);\n        if (pendingElements) {\n          pendingElements.push(element);\n          // If there is *any other* applicable definition for the element, add\n          // it to the list of elements with stable definitions that need to be\n          // upgraded.\n        } else if (this._localNameToDefinition.has(localName)) {\n          elementsWithStableDefinitions.push(element);\n        }\n      },\n    });\n\n    // Upgrade elements with 'stable' definitions first.\n    for (let i = 0; i < elementsWithStableDefinitions.length; i++) {\n      this._internals.upgradeReaction(elementsWithStableDefinitions[i]);\n    }\n\n    // Upgrade elements with 'pending' definitions in the order they were\n    // defined.\n    for (let i = 0; i < unflushedLocalNames.length; i++) {\n      const localName = unflushedLocalNames[i];\n      const pendingUpgradableElements = elementsWithPendingDefinitions.get(\n        localName\n      )!;\n\n      // Attempt to upgrade all applicable elements.\n      for (let i = 0; i < pendingUpgradableElements.length; i++) {\n        this._internals.upgradeReaction(pendingUpgradableElements[i]);\n      }\n\n      // Resolve any promises created by `whenDefined` for the definition.\n      const deferred = this._whenDefinedDeferred.get(localName);\n      if (deferred) {\n        deferred.resolve(undefined);\n      }\n    }\n\n    unflushedLocalNames.length = 0;\n  }\n\n  get(localName: string): undefined | {new (): HTMLElement} {\n    const definition = this.internal_localNameToDefinition(localName);\n    if (definition) {\n      return definition.constructorFunction;\n    }\n\n    return undefined;\n  }\n\n  whenDefined(localName: string): Promise<void> {\n    if (!Utilities.isValidCustomElementName(localName)) {\n      return Promise.reject(\n        new SyntaxError(`'${localName}' is not a valid custom element name.`)\n      );\n    }\n\n    const prior = this._whenDefinedDeferred.get(localName);\n    if (prior) {\n      return prior.toPromise();\n    }\n\n    const deferred = new Deferred<undefined>();\n    this._whenDefinedDeferred.set(localName, deferred);\n\n    // Resolve immediately if the given local name has a regular or lazy\n    // definition *and* the full document walk to upgrade elements with that\n    // local name has already happened.\n    //\n    // The behavior of the returned promise differs between the lazy and the\n    // non-lazy cases if the definition fails. Normally, the definition would\n    // fail synchronously and no pending promises would resolve. However, if\n    // the definition is lazy but has not yet been reified, the promise is\n    // resolved early here even though it might fail later when reified.\n    const anyDefinitionExists =\n      this._localNameToDefinition.has(localName) ||\n      this._localNameToConstructorGetter.has(localName);\n    const definitionHasFlushed =\n      this._unflushedLocalNames.indexOf(localName) === -1;\n    if (anyDefinitionExists && definitionHasFlushed) {\n      deferred.resolve(undefined);\n    }\n\n    return deferred.toPromise();\n  }\n\n  polyfillWrapFlushCallback(outer: (fn: () => void) => void) {\n    if (this._documentConstructionObserver) {\n      this._documentConstructionObserver.disconnect();\n    }\n    const inner = this._flushCallback;\n    this._flushCallback = (flush) => outer(() => inner(flush));\n  }\n\n  internal_localNameToDefinition(\n    localName: string\n  ): CustomElementDefinition | undefined {\n    const existingDefinition = this._localNameToDefinition.get(localName);\n    if (existingDefinition) {\n      return existingDefinition;\n    }\n\n    const constructorGetter = this._localNameToConstructorGetter.get(localName);\n    if (constructorGetter) {\n      this._localNameToConstructorGetter.delete(localName);\n      try {\n        return this.internal_reifyDefinition(localName, constructorGetter());\n      } catch (e) {\n        this._internals.reportTheException(e);\n      }\n    }\n\n    return undefined;\n  }\n\n  internal_constructorToDefinition(\n    constructor: ElementConstructor\n  ): CustomElementDefinition | undefined {\n    return this._constructorToDefinition.get(constructor);\n  }\n}\n\n// Closure compiler exports.\nwindow[\n  'CustomElementRegistry'\n] = (CustomElementRegistry as unknown) as typeof window['CustomElementRegistry'];\n/* eslint-disable no-self-assign */\nCustomElementRegistry.prototype['define'] =\n  CustomElementRegistry.prototype.define;\nCustomElementRegistry.prototype['upgrade'] =\n  CustomElementRegistry.prototype.upgrade;\nCustomElementRegistry.prototype['get'] = CustomElementRegistry.prototype.get;\nCustomElementRegistry.prototype['whenDefined'] =\n  CustomElementRegistry.prototype.whenDefined;\nCustomElementRegistry.prototype['polyfillDefineLazy'] =\n  CustomElementRegistry.prototype.polyfillDefineLazy;\nCustomElementRegistry.prototype['polyfillWrapFlushCallback'] =\n  CustomElementRegistry.prototype.polyfillWrapFlushCallback;\n/* eslint-enable no-self-assign */\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nimport CustomElementInternals from '../../CustomElementInternals.js';\nimport * as Utilities from '../../Utilities.js';\n\ntype NativeMethod = (this: Node, ...args: Array<Node | string>) => void;\n\ninterface ParentNodeNativeMethods {\n  prepend: NativeMethod;\n  append: NativeMethod;\n}\n\nexport default function (\n  internals: CustomElementInternals,\n  destination: ParentNode,\n  builtIn: ParentNodeNativeMethods\n) {\n  function appendPrependPatch(builtInMethod: NativeMethod): NativeMethod {\n    return function (this: Node, ...nodes) {\n      /**\n       * A copy of `nodes`, with any DocumentFragment replaced by its children.\n       */\n      const flattenedNodes: Array<Node | string> = [];\n\n      /**\n       * Elements in `nodes` that were connected before this call.\n       */\n      const connectedElements: Array<Node> = [];\n\n      for (let i = 0; i < nodes.length; i++) {\n        const node = nodes[i];\n\n        if (node instanceof Element && Utilities.isConnected(node)) {\n          connectedElements.push(node);\n        }\n\n        if (node instanceof DocumentFragment) {\n          for (let child = node.firstChild; child; child = child.nextSibling) {\n            flattenedNodes.push(child);\n          }\n        } else {\n          flattenedNodes.push(node);\n        }\n      }\n\n      builtInMethod.apply(this, nodes);\n\n      for (let i = 0; i < connectedElements.length; i++) {\n        internals.disconnectTree(connectedElements[i]);\n      }\n\n      if (Utilities.isConnected(this)) {\n        for (let i = 0; i < flattenedNodes.length; i++) {\n          const node = flattenedNodes[i];\n          if (node instanceof Element) {\n            internals.connectTree(node);\n          }\n        }\n      }\n    };\n  }\n\n  if (builtIn.prepend !== undefined) {\n    destination.prepend = appendPrependPatch(builtIn.prepend);\n  }\n\n  if (builtIn.append !== undefined) {\n    destination.append = appendPrependPatch(builtIn.append);\n  }\n}\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nimport CustomElementInternals from '../CustomElementInternals.js';\n\nimport PatchParentNode from './Interface/ParentNode.js';\nimport * as Native from './Native.js';\n\nexport default function (internals: CustomElementInternals) {\n  Document.prototype.createElement = function (\n    this: Document,\n    localName: string\n  ) {\n    return internals.createAnElement(this, localName, null);\n  } as typeof Document.prototype.createElement;\n\n  Document.prototype.importNode = function <T extends Node>(\n    this: Document,\n    node: T,\n    deep?: boolean\n  ): T {\n    const clone = Native.Document_importNode.call(this, node, !!deep) as T;\n    // Only create custom elements if this document is associated with the\n    // registry.\n    if (!this.__CE_registry) {\n      internals.patchTree(clone);\n    } else {\n      internals.patchAndUpgradeTree(clone);\n    }\n    return clone;\n  };\n\n  Document.prototype.createElementNS = function (\n    this: Document,\n    namespace: string | null,\n    localName: string\n  ) {\n    return internals.createAnElement(this, localName, namespace);\n  } as typeof Document.prototype.createElementNS;\n\n  PatchParentNode(internals, Document.prototype, {\n    prepend: Native.Document_prepend,\n    append: Native.Document_append,\n  });\n}\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nimport CustomElementInternals from '../../CustomElementInternals.js';\nimport * as Utilities from '../../Utilities.js';\n\ntype NativeMethod = (this: ChildNode, ...args: Array<Node | string>) => void;\n\ninterface ChildNodeNativeMethods {\n  before: NativeMethod;\n  after: NativeMethod;\n  replaceWith: NativeMethod;\n  remove: (this: ChildNode) => void;\n}\n\nexport default function (\n  internals: CustomElementInternals,\n  destination: ChildNode,\n  builtIn: ChildNodeNativeMethods\n) {\n  function beforeAfterPatch(builtInMethod: NativeMethod): NativeMethod {\n    return function (this: ChildNode, ...nodes) {\n      const flattenedNodes: Array<string | Node> = [];\n      const connectedElements: Array<Node> = [];\n\n      for (let i = 0; i < nodes.length; i++) {\n        const node = nodes[i];\n\n        if (node instanceof Element && Utilities.isConnected(node)) {\n          connectedElements.push(node);\n        }\n\n        if (node instanceof DocumentFragment) {\n          for (let child = node.firstChild; child; child = child.nextSibling) {\n            flattenedNodes.push(child);\n          }\n        } else {\n          flattenedNodes.push(node);\n        }\n      }\n\n      builtInMethod.apply(this, nodes);\n\n      for (let i = 0; i < connectedElements.length; i++) {\n        internals.disconnectTree(connectedElements[i]);\n      }\n\n      if (Utilities.isConnected(this)) {\n        for (let i = 0; i < flattenedNodes.length; i++) {\n          const node = flattenedNodes[i];\n          if (node instanceof Element) {\n            internals.connectTree(node);\n          }\n        }\n      }\n    };\n  }\n\n  if (builtIn.before !== undefined) {\n    destination.before = beforeAfterPatch(builtIn.before);\n  }\n\n  if (builtIn.after !== undefined) {\n    destination.after = beforeAfterPatch(builtIn.after);\n  }\n\n  if (builtIn.replaceWith !== undefined) {\n    destination.replaceWith = function (\n      this: ChildNode,\n      ...nodes: Array<Node | string>\n    ) {\n      /**\n       * A copy of `nodes`, with any DocumentFragment replaced by its children.\n       */\n      const flattenedNodes: Array<Node | string> = [];\n\n      /**\n       * Elements in `nodes` that were connected before this call.\n       */\n      const connectedElements: Array<Node> = [];\n\n      for (let i = 0; i < nodes.length; i++) {\n        const node = nodes[i];\n\n        if (node instanceof Element && Utilities.isConnected(node)) {\n          connectedElements.push(node);\n        }\n\n        if (node instanceof DocumentFragment) {\n          for (let child = node.firstChild; child; child = child.nextSibling) {\n            flattenedNodes.push(child);\n          }\n        } else {\n          flattenedNodes.push(node);\n        }\n      }\n\n      const wasConnected = Utilities.isConnected(this);\n\n      builtIn.replaceWith.apply(this, nodes);\n\n      for (let i = 0; i < connectedElements.length; i++) {\n        internals.disconnectTree(connectedElements[i]);\n      }\n\n      if (wasConnected) {\n        internals.disconnectTree(this);\n        for (let i = 0; i < flattenedNodes.length; i++) {\n          const node = flattenedNodes[i];\n          if (node instanceof Element) {\n            internals.connectTree(node);\n          }\n        }\n      }\n    };\n  }\n\n  if (builtIn.remove !== undefined) {\n    destination.remove = function (this: ChildNode) {\n      const wasConnected = Utilities.isConnected(this);\n\n      builtIn.remove.call(this);\n\n      if (wasConnected) {\n        internals.disconnectTree(this);\n      }\n    };\n  }\n}\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nimport CustomElementInternals from '../CustomElementInternals.js';\nimport CEState from '../CustomElementState.js';\nimport * as Utilities from '../Utilities.js';\n\nimport PatchChildNode from './Interface/ChildNode.js';\nimport PatchParentNode from './Interface/ParentNode.js';\nimport * as Native from './Native.js';\n\nexport default function (internals: CustomElementInternals) {\n  if (Native.Element_attachShadow) {\n    Element.prototype.attachShadow = function (\n      this: Element,\n      init: ShadowRootInit\n    ) {\n      const shadowRoot = Native.Element_attachShadow.call(this, init);\n      internals.patchNode(shadowRoot);\n      this.__CE_shadowRoot = shadowRoot;\n      return shadowRoot;\n    };\n  }\n\n  function patch_innerHTML(\n    destination: Element,\n    baseDescriptor: PropertyDescriptor\n  ) {\n    Object.defineProperty(destination, 'innerHTML', {\n      enumerable: baseDescriptor.enumerable,\n      configurable: true,\n      get: baseDescriptor.get,\n      set: function (this: Element, htmlString) {\n        const isConnected = Utilities.isConnected(this);\n\n        // NOTE: In IE11, when using the native `innerHTML` setter, all nodes\n        // that were previously descendants of the context element have all of\n        // their children removed as part of the set - the entire subtree is\n        // 'disassembled'. This work around walks the subtree *before* using the\n        // native setter.\n        let removedElements: undefined | Array<Element> = undefined;\n        if (isConnected) {\n          removedElements = [];\n          internals.forEachElement(this, (element) => {\n            if (element !== this) {\n              removedElements!.push(element);\n            }\n          });\n        }\n\n        baseDescriptor.set!.call(this, htmlString);\n\n        if (removedElements) {\n          for (let i = 0; i < removedElements.length; i++) {\n            const element = removedElements[i];\n            if (element.__CE_state === CEState.custom) {\n              internals.disconnectedCallback(element);\n            }\n          }\n        }\n\n        // Only create custom elements if this element's owner document is\n        // associated with the registry.\n        if (!this.ownerDocument!.__CE_registry) {\n          internals.patchTree(this);\n        } else {\n          internals.patchAndUpgradeTree(this);\n        }\n        return htmlString;\n      },\n    });\n  }\n\n  if (Native.Element_innerHTML && Native.Element_innerHTML.get) {\n    patch_innerHTML(Element.prototype, Native.Element_innerHTML);\n  } else if (Native.HTMLElement_innerHTML && Native.HTMLElement_innerHTML.get) {\n    patch_innerHTML(HTMLElement.prototype, Native.HTMLElement_innerHTML);\n  } else {\n    internals.addElementPatch(function (element) {\n      patch_innerHTML(element, {\n        enumerable: true,\n        configurable: true,\n        // Implements getting `innerHTML` by performing an unpatched `cloneNode`\n        // of the element and returning the resulting element's `innerHTML`.\n        // TODO: Is this too expensive?\n        get: function (this: Element) {\n          return (Native.Node_cloneNode.call(this, true) as Element).innerHTML;\n        },\n        // Implements setting `innerHTML` by creating an unpatched element,\n        // setting `innerHTML` of that element and replacing the target\n        // element's children with those of the unpatched element.\n        set: function (this: Element, assignedValue) {\n          // NOTE: re-route to `content` for `template` elements.\n          // We need to do this because `template.appendChild` does not\n          // route into `template.content`.\n          const isTemplate = this.localName === 'template';\n          const content = isTemplate\n            ? (this as HTMLTemplateElement).content\n            : this;\n          const rawElement = Native.Document_createElementNS.call(\n            document,\n            this.namespaceURI,\n            this.localName\n          );\n          rawElement.innerHTML = assignedValue;\n\n          while (content.childNodes.length > 0) {\n            Native.Node_removeChild.call(content, content.childNodes[0]);\n          }\n          const container = isTemplate\n            ? (rawElement as HTMLTemplateElement).content\n            : rawElement;\n          while (container.childNodes.length > 0) {\n            Native.Node_appendChild.call(content, container.childNodes[0]);\n          }\n        },\n      });\n    });\n  }\n\n  Element.prototype.setAttribute = function (this: Element, name, newValue) {\n    // Fast path for non-custom elements.\n    if (this.__CE_state !== CEState.custom) {\n      return Native.Element_setAttribute.call(this, name, newValue);\n    }\n\n    const oldValue = Native.Element_getAttribute.call(this, name);\n    Native.Element_setAttribute.call(this, name, newValue);\n    newValue = Native.Element_getAttribute.call(this, name)!;\n    internals.attributeChangedCallback(this, name, oldValue, newValue, null);\n  };\n\n  Element.prototype.setAttributeNS = function (\n    this: Element,\n    namespace,\n    name,\n    newValue\n  ) {\n    // Fast path for non-custom elements.\n    if (this.__CE_state !== CEState.custom) {\n      return Native.Element_setAttributeNS.call(\n        this,\n        namespace,\n        name,\n        newValue\n      );\n    }\n\n    const oldValue = Native.Element_getAttributeNS.call(this, namespace, name);\n    Native.Element_setAttributeNS.call(this, namespace, name, newValue);\n    newValue = Native.Element_getAttributeNS.call(this, namespace, name)!;\n    internals.attributeChangedCallback(\n      this,\n      name,\n      oldValue,\n      newValue,\n      namespace\n    );\n  };\n\n  Element.prototype.removeAttribute = function (this: Element, name) {\n    // Fast path for non-custom elements.\n    if (this.__CE_state !== CEState.custom) {\n      return Native.Element_removeAttribute.call(this, name);\n    }\n\n    const oldValue = Native.Element_getAttribute.call(this, name);\n    Native.Element_removeAttribute.call(this, name);\n    if (oldValue !== null) {\n      internals.attributeChangedCallback(this, name, oldValue, null, null);\n    }\n  };\n\n  Element.prototype.removeAttributeNS = function (\n    this: Element,\n    namespace,\n    name\n  ) {\n    // Fast path for non-custom elements.\n    if (this.__CE_state !== CEState.custom) {\n      return Native.Element_removeAttributeNS.call(this, namespace, name);\n    }\n\n    const oldValue = Native.Element_getAttributeNS.call(this, namespace, name);\n    Native.Element_removeAttributeNS.call(this, namespace, name);\n    // In older browsers, `Element#getAttributeNS` may return the empty string\n    // instead of null if the attribute does not exist. For details, see;\n    // https://developer.mozilla.org/en-US/docs/Web/API/Element/getAttributeNS#Notes\n    const newValue = Native.Element_getAttributeNS.call(this, namespace, name);\n    if (oldValue !== newValue) {\n      internals.attributeChangedCallback(\n        this,\n        name,\n        oldValue,\n        newValue,\n        namespace\n      );\n    }\n  };\n\n  function patch_insertAdjacentElement(\n    destination: Element,\n    baseMethod: Element['insertAdjacentElement']\n  ) {\n    destination.insertAdjacentElement = function (\n      this: Element,\n      position,\n      element\n    ) {\n      const wasConnected = Utilities.isConnected(element);\n      const insertedElement = baseMethod.call(this, position, element)!;\n\n      if (wasConnected) {\n        internals.disconnectTree(element);\n      }\n\n      if (Utilities.isConnected(insertedElement)) {\n        internals.connectTree(element);\n      }\n      return insertedElement;\n    };\n  }\n\n  if (Native.HTMLElement_insertAdjacentElement) {\n    patch_insertAdjacentElement(\n      HTMLElement.prototype,\n      Native.HTMLElement_insertAdjacentElement\n    );\n  } else if (Native.Element_insertAdjacentElement) {\n    patch_insertAdjacentElement(\n      Element.prototype,\n      Native.Element_insertAdjacentElement\n    );\n  }\n\n  function patch_insertAdjacentHTML(\n    destination: Element,\n    baseMethod: Element['insertAdjacentHTML']\n  ) {\n    /**\n     * Patches and upgrades all nodes which are siblings between `start`\n     * (inclusive) and `end` (exclusive). If `end` is `null`, then all siblings\n     * following `start` will be patched and upgraded.\n     */\n    function upgradeNodesInRange(start: Node, end: Node | null) {\n      const nodes = [];\n      for (let node: Node = start; node !== end; node = node.nextSibling!) {\n        nodes.push(node);\n      }\n      for (let i = 0; i < nodes.length; i++) {\n        internals.patchAndUpgradeTree(nodes[i]);\n      }\n    }\n\n    destination.insertAdjacentHTML = function (this: Element, position, text) {\n      const strPosition = position.toLowerCase();\n\n      if (strPosition === 'beforebegin') {\n        const marker = this.previousSibling;\n        baseMethod.call(this, strPosition, text);\n        upgradeNodesInRange(marker || this.parentNode!.firstChild!, this);\n      } else if (strPosition === 'afterbegin') {\n        const marker = this.firstChild;\n        baseMethod.call(this, strPosition, text);\n        upgradeNodesInRange(this.firstChild!, marker);\n      } else if (strPosition === 'beforeend') {\n        const marker = this.lastChild;\n        baseMethod.call(this, strPosition, text);\n        upgradeNodesInRange(marker || this.firstChild!, null);\n      } else if (strPosition === 'afterend') {\n        const marker = this.nextSibling;\n        baseMethod.call(this, strPosition, text);\n        upgradeNodesInRange(this.nextSibling!, marker);\n      } else {\n        throw new SyntaxError(\n          `The value provided (${String(strPosition)}) is ` +\n            \"not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'.\"\n        );\n      }\n    };\n  }\n\n  if (Native.HTMLElement_insertAdjacentHTML) {\n    patch_insertAdjacentHTML(\n      HTMLElement.prototype,\n      Native.HTMLElement_insertAdjacentHTML\n    );\n  } else if (Native.Element_insertAdjacentHTML) {\n    patch_insertAdjacentHTML(\n      Element.prototype,\n      Native.Element_insertAdjacentHTML\n    );\n  }\n\n  PatchParentNode(internals, Element.prototype, {\n    prepend: Native.Element_prepend,\n    append: Native.Element_append,\n  });\n\n  PatchChildNode(internals, Element.prototype, {\n    before: Native.Element_before,\n    after: Native.Element_after,\n    replaceWith: Native.Element_replaceWith,\n    remove: Native.Element_remove,\n  });\n}\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * Represents the 'already constructed marker' used in custom\n * element construction stacks.\n *\n * https://html.spec.whatwg.org/#concept-already-constructed-marker\n */\nconst alreadyConstructedMarker = {} as {_alreadyConstructedMarker: never};\n\nexport default alreadyConstructedMarker;\nexport type AlreadyConstructedMarkerType = typeof alreadyConstructedMarker;\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nimport AlreadyConstructedMarker from '../AlreadyConstructedMarker.js';\nimport CustomElementInternals from '../CustomElementInternals.js';\nimport CustomElementRegistry from '../CustomElementRegistry.js';\nimport CEState from '../CustomElementState.js';\nimport * as Native from './Native.js';\n\nexport default function (internals: CustomElementInternals) {\n  const PatchedHTMLElement = function HTMLElement(this: HTMLElement) {\n    // This should really be `new.target` but `new.target` can't be\n    // emulated in ES5. Assuming the user keeps the default value of the\n    // constructor's prototype's `constructor` property, this is\n    // equivalent.\n    const constructor = this.constructor as {new (): HTMLElement};\n\n    // Always look up the definition from the global registry.\n    const registry = document.__CE_registry!;\n    const definition = (registry as CustomElementRegistry).internal_constructorToDefinition(\n      constructor\n    );\n    if (!definition) {\n      throw new Error(\n        'Failed to construct a custom element: ' +\n          'The constructor was not registered with `customElements`.'\n      );\n    }\n\n    const constructionStack = definition.constructionStack;\n\n    if (constructionStack.length === 0) {\n      const element = Native.Document_createElement.call(\n        document,\n        definition.localName\n      ) as HTMLElement;\n      Object.setPrototypeOf(element, constructor.prototype as typeof element);\n      element.__CE_state = CEState.custom;\n      element.__CE_definition = definition;\n      internals.patchElement(element);\n      return element;\n    }\n\n    const lastIndex = constructionStack.length - 1;\n    const element = constructionStack[lastIndex];\n    if (element === AlreadyConstructedMarker) {\n      const localName = definition.localName;\n      throw new Error(\n        `Failed to construct '${localName}': ` +\n          'This element was already constructed.'\n      );\n    }\n    const toConstructElement = element as HTMLElement;\n    constructionStack[lastIndex] = AlreadyConstructedMarker;\n\n    Object.setPrototypeOf(\n      toConstructElement,\n      constructor.prototype as typeof toConstructElement\n    );\n    internals.patchElement(toConstructElement);\n\n    return toConstructElement;\n  };\n\n  PatchedHTMLElement.prototype = Native.HTMLElement.prototype;\n  // Safari 9 has `writable: false` on the propertyDescriptor\n  // Make it writable so that TypeScript can patch up the\n  // constructor in the ES5 compiled code.\n  Object.defineProperty(HTMLElement.prototype, 'constructor', {\n    writable: true,\n    configurable: true,\n    enumerable: false,\n    value: PatchedHTMLElement,\n  });\n\n  window['HTMLElement'] = (PatchedHTMLElement as unknown) as typeof HTMLElement;\n}\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nimport CustomElementInternals from '../CustomElementInternals.js';\nimport * as Utilities from '../Utilities.js';\n\nimport * as Native from './Native.js';\n\nexport default function (internals: CustomElementInternals) {\n  // `Node#nodeValue` is implemented on `Attr`.\n  // `Node#textContent` is implemented on `Attr`, `Element`.\n\n  Node.prototype.insertBefore = function <T extends Node>(\n    this: Node,\n    node: T,\n    refNode: Node | null\n  ) {\n    if (node instanceof DocumentFragment) {\n      const insertedNodes = Utilities.childrenFromFragment(node);\n      const nativeResult = Native.Node_insertBefore.call(this, node, refNode);\n\n      // DocumentFragments can't be connected, so `disconnectTree` will never\n      // need to be called on a DocumentFragment's children after inserting it.\n\n      if (Utilities.isConnected(this)) {\n        for (let i = 0; i < insertedNodes.length; i++) {\n          internals.connectTree(insertedNodes[i]);\n        }\n      }\n\n      return nativeResult as T;\n    }\n\n    const nodeWasConnectedElement =\n      node instanceof Element && Utilities.isConnected(node);\n    const nativeResult = Native.Node_insertBefore.call(\n      this,\n      node,\n      refNode\n    ) as T;\n\n    if (nodeWasConnectedElement) {\n      internals.disconnectTree(node);\n    }\n\n    if (Utilities.isConnected(this)) {\n      internals.connectTree(node);\n    }\n\n    return nativeResult;\n  };\n\n  Node.prototype.appendChild = function <T extends Node>(this: Node, node: T) {\n    if (node instanceof DocumentFragment) {\n      const insertedNodes = Utilities.childrenFromFragment(node);\n      const nativeResult = Native.Node_appendChild.call(this, node) as T;\n\n      // DocumentFragments can't be connected, so `disconnectTree` will never\n      // need to be called on a DocumentFragment's children after inserting it.\n\n      if (Utilities.isConnected(this)) {\n        for (let i = 0; i < insertedNodes.length; i++) {\n          internals.connectTree(insertedNodes[i]);\n        }\n      }\n\n      return nativeResult;\n    }\n\n    const nodeWasConnectedElement =\n      node instanceof Element && Utilities.isConnected(node);\n    const nativeResult = Native.Node_appendChild.call(this, node) as T;\n\n    if (nodeWasConnectedElement) {\n      internals.disconnectTree(node);\n    }\n\n    if (Utilities.isConnected(this)) {\n      internals.connectTree(node);\n    }\n\n    return nativeResult;\n  };\n\n  Node.prototype.cloneNode = function (this: Node, deep) {\n    const clone = Native.Node_cloneNode.call(this, !!deep);\n    // Only create custom elements if this element's owner document is\n    // associated with the registry.\n    if (!this.ownerDocument!.__CE_registry) {\n      internals.patchTree(clone);\n    } else {\n      internals.patchAndUpgradeTree(clone);\n    }\n    return clone;\n  };\n\n  Node.prototype.removeChild = function <T extends Node>(this: Node, node: T) {\n    const nodeWasConnectedElement =\n      node instanceof Element && Utilities.isConnected(node);\n    const nativeResult = Native.Node_removeChild.call(this, node) as T;\n\n    if (nodeWasConnectedElement) {\n      internals.disconnectTree(node);\n    }\n\n    return nativeResult;\n  };\n\n  Node.prototype.replaceChild = function <T extends Node>(\n    this: Node,\n    nodeToInsert: Node,\n    nodeToRemove: T\n  ) {\n    if (nodeToInsert instanceof DocumentFragment) {\n      const insertedNodes = Utilities.childrenFromFragment(nodeToInsert);\n      const nativeResult = Native.Node_replaceChild.call(\n        this,\n        nodeToInsert,\n        nodeToRemove\n      ) as T;\n\n      // DocumentFragments can't be connected, so `disconnectTree` will never\n      // need to be called on a DocumentFragment's children after inserting it.\n\n      if (Utilities.isConnected(this)) {\n        internals.disconnectTree(nodeToRemove);\n        for (let i = 0; i < insertedNodes.length; i++) {\n          internals.connectTree(insertedNodes[i]);\n        }\n      }\n\n      return nativeResult;\n    }\n\n    const nodeToInsertWasConnectedElement =\n      nodeToInsert instanceof Element && Utilities.isConnected(nodeToInsert);\n    const nativeResult = Native.Node_replaceChild.call(\n      this,\n      nodeToInsert,\n      nodeToRemove\n    ) as T;\n    const thisIsConnected = Utilities.isConnected(this);\n\n    if (thisIsConnected) {\n      internals.disconnectTree(nodeToRemove);\n    }\n\n    if (nodeToInsertWasConnectedElement) {\n      internals.disconnectTree(nodeToInsert);\n    }\n\n    if (thisIsConnected) {\n      internals.connectTree(nodeToInsert);\n    }\n\n    return nativeResult;\n  };\n\n  function patch_textContent(\n    destination: Node,\n    baseDescriptor: PropertyDescriptor\n  ) {\n    Object.defineProperty(destination, 'textContent', {\n      enumerable: baseDescriptor.enumerable,\n      configurable: true,\n      get: baseDescriptor.get,\n      set: function (this: Node, assignedValue) {\n        // If this is a text node then there are no nodes to disconnect.\n        if (this.nodeType === Node.TEXT_NODE) {\n          baseDescriptor.set!.call(this, assignedValue);\n          return;\n        }\n\n        let removedNodes = undefined;\n        // Checking for `firstChild` is faster than reading `childNodes.length`\n        // to compare with 0.\n        if (this.firstChild) {\n          // Using `childNodes` is faster than `children`, even though we only\n          // care about elements.\n          const childNodes = this.childNodes;\n          const childNodesLength = childNodes.length;\n          if (childNodesLength > 0 && Utilities.isConnected(this)) {\n            // Copying an array by iterating is faster than using slice.\n            removedNodes = new Array(childNodesLength);\n            for (let i = 0; i < childNodesLength; i++) {\n              removedNodes[i] = childNodes[i];\n            }\n          }\n        }\n\n        baseDescriptor.set!.call(this, assignedValue);\n\n        if (removedNodes) {\n          for (let i = 0; i < removedNodes.length; i++) {\n            internals.disconnectTree(removedNodes[i]);\n          }\n        }\n      },\n    });\n  }\n\n  if (Native.Node_textContent && Native.Node_textContent.get) {\n    patch_textContent(Node.prototype, Native.Node_textContent);\n  } else {\n    internals.addNodePatch(function (element) {\n      patch_textContent(element, {\n        enumerable: true,\n        configurable: true,\n        // NOTE: This implementation of the `textContent` getter assumes that\n        // text nodes' `textContent` getter will not be patched.\n        get: function (this: Node) {\n          const parts: Array<string | null> = [];\n\n          for (let n = this.firstChild; n; n = n.nextSibling) {\n            if (n.nodeType === Node.COMMENT_NODE) {\n              continue;\n            }\n            parts.push(n.textContent);\n          }\n\n          return parts.join('');\n        },\n        set: function (this: Node, assignedValue) {\n          while (this.firstChild) {\n            Native.Node_removeChild.call(this, this.firstChild);\n          }\n          // `textContent = null | undefined | ''` does not result in\n          // a TextNode childNode\n          if (assignedValue != null && assignedValue !== '') {\n            Native.Node_appendChild.call(\n              this,\n              document.createTextNode(assignedValue)\n            );\n          }\n        },\n      });\n    });\n  }\n}\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nimport CustomElementInternals from '../CustomElementInternals.js';\n\nimport PatchParentNode from './Interface/ParentNode.js';\nimport * as Native from './Native.js';\n\nexport default function (internals: CustomElementInternals) {\n  PatchParentNode(internals, DocumentFragment.prototype, {\n    prepend: Native.DocumentFragment_prepend,\n    append: Native.DocumentFragment_append,\n  });\n}\n"]},"metadata":{},"sourceType":"script"}